[
    {
        "number": 84209,
        "title": "[v10.4.x] Docs: corrected data source management information",
        "body": "Backport cfc7ea92daf4b05c2ba84c5a81fb256938271b08 from #84046\n\n---\n\nMaking minor changes after the PR merged on Data sources and Data source administration.\r\n\r\nhttps://github.com/grafana/grafana/pull/83712\r\n\r\n\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "kind/enhancement",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84046,
        "title": "Docs: corrected data source management information",
        "body": "Making minor changes after the PR merged on Data sources and Data source administration.\r\n\r\nhttps://github.com/grafana/grafana/pull/83712\r\n\r\n\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x",
            "kind/enhancement"
        ]
    },
    {
        "number": 83194,
        "title": "[v10.4.x] Docs: add information about filtering for annotations",
        "body": "Backport f18b9ddac6ec46ed5eee5fda727e99322616123f from #82957\n\n---\n\nAdding documentation for new feature announced in What's new in Grafana 10.3; [applying transformations to annotations](https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v10-3/).\r\n\r\n**NOTE**: This PR doesn't use the process outlined in the front matter of this file to make the update because the process is currently broken. Okay per @baldm0mma ",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84590,
        "title": "[v10.4.x] InfluxDB: Fix interpolation of multi value template variables by adding parenthesis around them",
        "body": "Backport 757fa06b85f8e1e9d416134e383fc15d7d521fa7 from #83577\r\n\r\n---\r\n\r\n**What is this feature?**\r\n\r\nHistorically we put parenthesis around multi-value template variables. But during the series of interpolation fixes that was missed. Since it wasn't covered with unit tests we couldn't detect the problem. This PR is addressing this issue.\r\n\r\n**Why do we need this feature?**\r\n\r\nBetter interpolation\r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB users with template variables which has \"multi-value\" or \"include all\" configuration\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/grafana/issues/83538\r\n\r\n\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83712,
        "title": "Docs/datasources usman",
        "body": "This PR fixes the following 2 pages:\r\n\r\nFor Link 1: https://grafana.com/docs/grafana/latest/administration/data-source-management/\r\n\r\nIt will fix the labels/tags and only keep the content that is exclusive to Grafana Cloud/Enterprise. \r\n\r\nAlso fixes some minor tweaks e.g. spell check, paragraphing, bullets etc.\r\n\r\nFor Link 2: https://grafana.com/docs/grafana/latest/datasources/\r\n\r\nIt adds the section from Link 1 which is NOT exclusive to Grafana Cloud/Enterprise. That means this link will have all the general information that is available in all Grafana flavors (OSS. Cloud and Enterprise)\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n\r\nSigned-off-by: Syed Usman Ahmad <usman.ahmad@grafana.com>",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x",
            "kind/enhancement"
        ]
    },
    {
        "number": 84260,
        "title": "[v10.4.x] OrgUsers: Refactor change `LastSeenAtAge` from '10 years' to 'Never'",
        "body": "Backport fbfaf8e003e6f07de698387dca8ce0d509e2c4dc from #84247\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nAll users table shows `Never` when a user has never logged in. In the user organization tab we show `10 years` from previous implementation. This changes to `Never` in the org tab.\r\n\r\n![image](https://github.com/grafana/grafana/assets/7727602/d26b934d-1a87-4fb4-9de2-85f8ad762c63)\r\n\r\n**Why do we need this feature?**\r\nAligning the all users table to the org users table.",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 83577,
        "title": "InfluxDB: Fix interpolation of multi value template variables by adding parenthesis around them",
        "body": "**What is this feature?**\r\n\r\nHistorically we put parenthesis around multi-value template variables. But during the series of interpolation fixes that was missed. Since it wasn't covered with unit tests we couldn't detect the problem. This PR is addressing this issue.\r\n\r\n**Why do we need this feature?**\r\n\r\nBetter interpolation\r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB users with template variables which has \"multi-value\" or \"include all\" configuration\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/grafana/issues/83538\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug"
        ]
    },
    {
        "number": 83133,
        "title": "Docs: What\u2019s new & Upgrade guide 10.4",
        "body": "**PLEASE DO NOT ADD DIRECTLY TO THIS PR; CREATE A BRANCH AND MAKE CHANGES THERE FOR REVIEW PRIOR TO MERGING**\r\n\r\nThis PR adds the What\u2019s new, which describes new features and changes available in Grafana v10.4, and the v10.4 Upgrade guide.\r\n\r\n**Note for reviewers**: Review should be limited to placement of entries. Please do not make any copy edits. These entries are exactly the same as what's in the What's new in Cloud and making changes here creates divergence. If there's anything that looks wrong or is missing, please flag it that so we can decide on a course of action. \r\n\r\n**TO DO**\r\n\r\n- [x] Add enablement videos as they are available - videos added but commented out. Will be commented in on a separate PR when videos are out of draft.\r\n\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83213,
        "title": "Tempo: Add template variable interpolation for filters",
        "body": "**What is this feature?**\r\n\r\nAdds template variable interpolation for filters.\r\n\r\n**Why do we need this feature?**\r\n\r\nSo variables will be interpolated in a users query in dashboards and when they open explore from a dashboard.\r\n\r\n**Who is this feature for?**\r\n\r\nTempo users.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/support-escalations/issues/9413",
        "labels": [
            "add to changelog",
            "area/datasource/frontend",
            "datasource/Tempo",
            "backport-failed",
            "backport v10.4.x",
            "area/frontend",
            "backport v10.3.x",
            "type/bug"
        ]
    },
    {
        "number": 83985,
        "title": "[v10.4.x] Docs/datasources usman",
        "body": "Backport 544bff2539f6c37f1a8dabb13bcebea96f68ecee from #83712\n\n---\n\nThis PR fixes the following 2 pages:\r\n\r\nFor Link 1: https://grafana.com/docs/grafana/latest/administration/data-source-management/\r\n\r\nIt will fix the labels/tags and only keep the content that is exclusive to Grafana Cloud/Enterprise. \r\n\r\nAlso fixes some minor tweaks e.g. spell check, paragraphing, bullets etc.\r\n\r\nFor Link 2: https://grafana.com/docs/grafana/latest/datasources/\r\n\r\nIt adds the section from Link 1 which is NOT exclusive to Grafana Cloud/Enterprise. That means this link will have all the general information that is available in all Grafana flavors (OSS. Cloud and Enterprise)\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n\r\nSigned-off-by: Syed Usman Ahmad <usman.ahmad@grafana.com>",
        "labels": [
            "kind/enhancement",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 82957,
        "title": "Docs: add information about filtering for annotations",
        "body": "Adding documentation for new feature announced in What's new in Grafana 10.3; [applying transformations to annotations](https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v10-3/).\r\n\r\n**NOTE**: This PR doesn't use the process outlined in the front matter of this file to make the update because the process is currently broken. Okay per @baldm0mma ",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x",
            "backport v10.3.x"
        ]
    },
    {
        "number": 83091,
        "title": "DataQuery: Track panel plugin id not type",
        "body": "Tweaks https://github.com/grafana/grafana/pull/81164  \r\n\r\nAlmost everywhere we refer to specific plugins by id not type (plugin.json they have an id),  everywhere in the code base it's by id we refer to plugins (except in dashoard json where it's a type property name). \r\n\r\nI would like to change this panel tracking property / header to use the name we have aligned on. Plugin type I think we should avoid unless we talking about different forms of plugins (Panel, Data source, App etc) ",
        "labels": [
            "add to changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/frontend",
            "area/backend",
            "datasource/Graphite",
            "levitate breaking change",
            "product-approved"
        ]
    },
    {
        "number": 84472,
        "title": "[v10.4.x] Chore: Adding log also for cases where datasource UID length is invalid",
        "body": "Backport 8e90e02db2bf9de26766a5c640f8717bfb103fdb from #84443\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nExtending invalid UID logging to also include cases where UID length is invalid. This PR follows https://github.com/grafana/grafana/issues/68447\r\n\r\n**Why do we need this feature?**\r\n\r\nMakes logging for invalid UID cases complete.\r\n\r\n**Who is this feature for?**\r\nPreparation for enforcing UID format in the future.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #84442\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "no-changelog",
            "backport",
            "product-approved"
        ]
    },
    {
        "number": 83262,
        "title": "Docs: 10.4 technical note for alertingUpgradeDryrunOnStart",
        "body": "Technical note for https://github.com/grafana/grafana/pull/82835\r\n\r\n![image](https://github.com/grafana/grafana/assets/8484471/6283dbc7-0fc6-4109-a0a6-ec3cd8db34a3)\r\n\r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "area/alerting/migration"
        ]
    },
    {
        "number": 83944,
        "title": "[v10.4.x] Docs: What\u2019s new & Upgrade guide 10.4",
        "body": "Backport db13c0839fa6061b6598e8d6749256127577e4d4 from #83133\n\n---\n\n**PLEASE DO NOT ADD DIRECTLY TO THIS PR; CREATE A BRANCH AND MAKE CHANGES THERE FOR REVIEW PRIOR TO MERGING**\r\n\r\nThis PR adds the What\u2019s new, which describes new features and changes available in Grafana v10.4, and the v10.4 Upgrade guide.\r\n\r\n**Note for reviewers**: Review should be limited to placement of entries. Please do not make any copy edits. These entries are exactly the same as what's in the What's new in Cloud and making changes here creates divergence. If there's anything that looks wrong or is missing, please flag it that so we can decide on a course of action. \r\n\r\n**TO DO**\r\n\r\n- [x] Add enablement videos as they are available - videos added but commented out. Will be commented in on a separate PR when videos are out of draft.\r\n\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84443,
        "title": "Chore: Adding log also for cases where datasource UID length is invalid",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nExtending invalid UID logging to also include cases where UID length is invalid. This PR follows https://github.com/grafana/grafana/issues/68447\r\n\r\n**Why do we need this feature?**\r\n\r\nMakes logging for invalid UID cases complete.\r\n\r\n**Who is this feature for?**\r\nPreparation for enforcing UID format in the future.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #84442\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/backend",
            "backport v10.3.x",
            "product-approved"
        ]
    },
    {
        "number": 84325,
        "title": "[v10.4.x] Docs: clarify query formatting for time range variable queries",
        "body": "Backport e552e21221d9e958b1f9ff6bb162fe764bd81d8d from #84074\n\n---\n\nClarifies that when you create data links using time range variables in the URL,  you need to add the `?` and `&` characters in the query as they're not automatically generated by Grafana. Per discussion on issue #83345.\r\n\r\nFixes #83345",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84247,
        "title": "OrgUsers: Refactor change `LastSeenAtAge` from '10 years' to 'Never'",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nAll users table shows `Never` when a user has never logged in. In the user organization tab we show `10 years` from previous implementation. This changes to `Never` in the org tab.\r\n\r\n![image](https://github.com/grafana/grafana/assets/7727602/d26b934d-1a87-4fb4-9de2-85f8ad762c63)\r\n\r\n**Why do we need this feature?**\r\nAligning the all users table to the org users table.",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport v10.4.x",
            "area/frontend"
        ]
    },
    {
        "number": 83987,
        "title": "Changelog: Updated changelog for 10.4.0",
        "body": null,
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84591,
        "title": "[v10.4.x] Service accounts: Same Org fix migration to account for duplicate entries",
        "body": "Backport 6c8895e349d3726826c4e0a3849bce7a030b89cb from #84349\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nThis introduces migration tests for the users table in the migration package. \r\n\r\n**Why do we need this feature?**\r\nWe needed a way to get tests running for a specific migration that caused issues for some cases.\r\n\r\nThese migrations caused issues on startup due to duplicate entries created when running the migration.\r\n\r\nhttps://github.com/grafana/grafana/pull/83893\r\n",
        "labels": [
            "no-changelog",
            "area/backend",
            "type/debt",
            "area/backend/db/migration",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84554,
        "title": "[v10.4.x] Chore: Fix changelog for v10.4.0",
        "body": "This backports changelog fixes to v10.4.0 branch. Related to https://github.com/grafana/grafana/pull/84551",
        "labels": [
            "no-changelog"
        ]
    },
    {
        "number": 83667,
        "title": "[v10.4.x] Tempo: Add template variable interpolation for filters",
        "body": "Backport 1631e4130393a2ccea8159ac99e8ebf1d0a726a0 from #83213\n\n---\n\n**What is this feature?**\r\n\r\nAdds template variable interpolation for filters.\r\n\r\n**Why do we need this feature?**\r\n\r\nSo variables will be interpolated in a users query in dashboards and when they open explore from a dashboard.\r\n\r\n**Who is this feature for?**\r\n\r\nTempo users.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/support-escalations/issues/9413",
        "labels": [
            "add to changelog",
            "area/datasource/frontend",
            "datasource/Tempo",
            "area/frontend",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84313,
        "title": "Docs: add table visualization for logs entry to what's new",
        "body": null,
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83988,
        "title": "[v10.4.x] Changelog: Updated changelog for 10.4.0",
        "body": "Backport 146ad85a564d21ff40269f0a6325ab938da61397 from #83987",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 81833,
        "title": "Docs: restructure Configure field overrides",
        "body": "This PR does the following:\r\n\r\n- Removes View and Delete sections\r\n- Adds a Supported visualizations section and links\r\n- Adds an Override rules section and removes rules definitions from Add task\r\n- Adds an Examples H2 and moves examples down to H3s\r\n\r\n**Out of scope**: Content additions or copy edits; those will be done on a new PR branched off this branch; then merged back in.\r\n\r\n**TO DO**\r\n\r\n- [x]  Get this PR #81834 approved\r\n- [x]  Get PR #81834 approved (content additions & updates)\r\n- [x]  Merge PR  into this branch\r\n\r\nThen merge this PR\r\n \r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83348,
        "title": "[v10.4.x] Docs: restructure Configure field overrides",
        "body": "Backport dfeb33fe5594195f039ef83884002e4773a6b60e from #81833\n\n---\n\nThis PR does the following:\r\n\r\n- Removes View and Delete sections\r\n- Adds a Supported visualizations section and links\r\n- Adds an Override rules section and removes rules definitions from Add task\r\n- Adds an Examples H2 and moves examples down to H3s\r\n\r\n**Out of scope**: Content additions or copy edits; those will be done on a new PR branched off this branch; then merged back in.\r\n\r\n**TO DO**\r\n\r\n- [x]  Get this PR #81834 approved\r\n- [x]  Get PR #81834 approved (content additions & updates)\r\n- [x]  Merge PR  into this branch\r\n\r\nThen merge this PR\r\n \r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84349,
        "title": "Service accounts: Same Org fix migration to account for duplicate entries",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nThis introduces migration tests for the users table in the migration package. \r\n\r\n**Why do we need this feature?**\r\nWe needed a way to get tests running for a specific migration that caused issues for some cases.\r\n\r\nThese migrations caused issues on startup due to duplicate entries created when running the migration.\r\n\r\nhttps://github.com/grafana/grafana/pull/83893\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/backend",
            "type/debt",
            "area/backend/db/migration",
            "type/bug"
        ]
    },
    {
        "number": 83164,
        "title": "[v10.4.x] DataQuery: Track panel plugin id not type",
        "body": "Backport 64e0a4282ef57d0d3efdf989fec67d21fbeac524 from #83091\n\n---\n\nTweaks https://github.com/grafana/grafana/pull/81164  \r\n\r\nAlmost everywhere we refer to specific plugins by id not type (plugin.json they have an id),  everywhere in the code base it's by id we refer to plugins (except in dashoard json where it's a type property name). \r\n\r\nI would like to change this panel tracking property / header to use the name we have aligned on. Plugin type I think we should avoid unless we talking about different forms of plugins (Panel, Data source, App etc) ",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/backend",
            "datasource/Graphite",
            "levitate breaking change",
            "product-approved",
            "backport"
        ]
    },
    {
        "number": 83167,
        "title": "[v10.4.x] Alerting docs: fixes oncall broken links",
        "body": "Backport 4b2ef3616571445c1bd1cf33fc596a77f03c4c34 from #83139\n\n---\n\nfixes oncall broken links as result of reorg",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84316,
        "title": "[v10.4.x] Docs: add table visualization for logs entry to what's new",
        "body": "Backport 9da48a8a48b1d12e73dd04bf50716a221c24c0b8 from #84313",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84758,
        "title": "[v10.4.x] docs: initial updates to state timeline documentation",
        "body": "Backport 2f539060f8f0d8413fa06c0ddfc26a4f5064d8f7 from #84224\n\n---\n\n**What is this feature?**\r\n\r\nUpdates to the state timeline docs to include:\r\n- how to configure a state timeline (to be added as a video)\r\n- supported data formats and example\r\n- when to use a state timeline\r\n\r\n**Why do we need this feature?**\r\n\r\nTo explain to our users how to configure a state timeline easily and when to use it.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana OSS and Cloud users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84088,
        "title": "[v10.4.x] Embed two visualization videos from the Grafana for Beginners series",
        "body": "Backport a15e48052f49cee0be0e8432d1ea3b4ce0310099 from #83928\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 81834,
        "title": "Docs: edit Configure field overrides",
        "body": "Content additions and copy edits\r\nTo be merged into branch from PR #81833 \r\n\r\n**TO DO** (after approval)\r\n- [x] Remove images from local and upload to admin\r\n- [x] Merge into PR #81833 ",
        "labels": [
            "no-changelog",
            "type/docs",
            "no-backport"
        ]
    },
    {
        "number": 84074,
        "title": "Docs: clarify query formatting for time range variable queries",
        "body": "Clarifies that when you create data links using time range variables in the URL,  you need to add the `?` and `&` characters in the query as they're not automatically generated by Grafana. Per discussion on issue #83345.\r\n\r\nFixes #83345",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 84224,
        "title": "docs: initial updates to state timeline documentation",
        "body": "**What is this feature?**\r\n\r\nUpdates to the state timeline docs to include:\r\n- how to configure a state timeline (to be added as a video)\r\n- supported data formats and example\r\n- when to use a state timeline\r\n\r\n**Why do we need this feature?**\r\n\r\nTo explain to our users how to configure a state timeline easily and when to use it.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana OSS and Cloud users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83703,
        "title": "[v10.4.x] Docs: fix config file info in upgrade guide",
        "body": "Backport e26cd8614d1f5f9445108c95824042191beb5be6 from #83273\n\n---\n\nFixes the names and locations of config files in upgrade guides",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83739,
        "title": "[DOC] Add profile-traces intro material; update Pyroscope data source info",
        "body": "This PR adds content for profiling and tracing, updates the Pyroscope data source content, and adds link to new content in the Pyroscope docs for the span traces configuration. \r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [X] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/profiling",
            "backport-failed",
            "backport v10.4.x",
            "type/docs"
        ]
    },
    {
        "number": 83619,
        "title": "Tempo: Better fallbacks for metrics query",
        "body": "\r\n**What is this feature?**\r\n\r\nThis PR fixes a couple of bugs we were seeing when Tempo returned no labels or labels with empty values for a specific query when using the metrics endpoint.\r\n\r\nWhen there are no labels and the results contains a single series, we fallback to the query string, to mimic the Prometheus datasource.\r\n\r\nWhen the value for a label is an empty string we force the series name to be `\"\"` since this is the actual value of the label. In Tempo the values are typed so we know that `\"\"` is the value of empty string instead of the absence of value. \r\n\r\n**Why do we need this feature?**\r\n\r\nWe were seeing errors and undesired behaviours when querying the metrics endpoint of Tempo.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of the Tempo datasource. \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes https://github.com/grafana/tempo/issues/3429\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "datasource/Tempo",
            "backport v10.4.x",
            "area/frontend",
            "type/bug"
        ]
    },
    {
        "number": 83144,
        "title": "QueryVariableEditor: Select a variable ds does not work",
        "body": "Fixes #82984\r\n\r\n**Problem**\r\nTo use DS variables, we cannot resolve the value before passing it to the DS picker. Instead, we should move only the reference, to have the proper value selected.\r\n\r\nThis is why, in the video reproducing the bug on the issue attached to it, we see that after selecting the variable on the picker, we resolve it and pass it down to the DS picker, so the resolved DS from the DS variable selected is the one displayed.\r\n\r\n**Solution**\r\nManage DS ref only. Adapt old and new variable editors to do that",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/dashboard/templating",
            "type/bug"
        ]
    },
    {
        "number": 83351,
        "title": "Docs: Add missing visualizations to Grafana vizualization index page",
        "body": "There were 3 visualization types missing in the list. Added: Geomap, Canvas and Gauge.\r\nHope the links work, just added them at the bottom, although Gauge was already there.\r\n\r\n**What is this feature?**\r\n\r\nNoticed there were some visualizations missing in the list.\r\nI am thinking for a future PR to sort the visualizations alphabetically for ease when trying to find them instead of the weird sections: Misc, Stats, Graphs, etc. This would match the left menu as well, although for some reason Time series is not alphabetical.\r\n\r\n**Why do we need this feature?**\r\n\r\nThe items are missing in the doc.\r\n\r\n**Who is this feature for?**\r\n\r\nEveryone\r\n\r\n**Which issue(s) does this PR fix?**:\r\nNo issue open.\r\n\r\n**Special notes for your reviewer:**\r\nI just added the links at the bottom. I hope they work.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83273,
        "title": "Docs: fix config file info in upgrade guide",
        "body": "Fixes the names and locations of config files in upgrade guides",
        "labels": [
            "backport v9.5.x",
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "backport v10.1.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport v10.0.x"
        ]
    },
    {
        "number": 83927,
        "title": "chore: bump Go to 1.21.8",
        "body": "**What is this feature?**\r\n\r\nBumping Go to 1.21.8\r\n\r\n**Why do we need this feature?**\r\n\r\nMaintenance\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "backport v9.5.x",
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "type/ci",
            "type/build-packaging",
            "backport v10.1.x",
            "backport v10.3.x",
            "backport v10.2.x",
            "dependencies",
            "backport v10.0.x"
        ]
    },
    {
        "number": 84285,
        "title": "[v10.4.x] Users: Add back check for undefined / null for value for `lastSeenAtAge` in table view",
        "body": "Backport 0cb9f2bb8d7602547a4f4c1e0350612cfaf3afcf from #84265\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWith https://github.com/grafana/grafana/pull/84247, we removed a defensive check for `undefined` for the `LastSeenAtAge` field being populated from the backend.\r\n\r\nThis PR adds the check back.",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 83165,
        "title": "[v10.4.x] Alerting docs: Fix migrating alert links",
        "body": "Backport 4720c99bd513d9ba2dde350654bf6be5aa1c9839 from #83141\n\n---\n\nfixes broken links by adding docs ref section\r\nupdates * and _",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83937,
        "title": "[v10.4.x] chore: bump Go to 1.21.8",
        "body": "Backport 01fb2cff624e402b927e16f4e04e9fc35c7ab08c from #83927\r\n\r\n---\r\n\r\n**What is this feature?**\r\n\r\nBumping Go to 1.21.8\r\n\r\n**Why do we need this feature?**\r\n\r\nMaintenance\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "type/ci",
            "no-changelog",
            "backport",
            "type/build-packaging"
        ]
    },
    {
        "number": 83181,
        "title": "[v10.4.x] QueryVariableEditor: Select a variable ds does not work",
        "body": "Backport 5460d75e74b0f6f477deed177683a2160477a8ba from #83144\n\n---\n\nFixes #82984\r\n\r\n**Problem**\r\nTo use DS variables, we cannot resolve the value before passing it to the DS picker. Instead, we should move only the reference, to have the proper value selected.\r\n\r\nThis is why, in the video reproducing the bug on the issue attached to it, we see that after selecting the variable on the picker, we resolve it and pass it down to the DS picker, so the resolved DS from the DS variable selected is the one displayed.\r\n\r\n**Solution**\r\nManage DS ref only. Adapt old and new variable editors to do that",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/dashboard/templating",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83139,
        "title": "Alerting docs: fixes oncall broken links",
        "body": "fixes oncall broken links as result of reorg",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport"
        ]
    },
    {
        "number": 83860,
        "title": "[v10.4.x] [DOC] Add profile-traces intro material; update Pyroscope data source info",
        "body": "Backport 57935250fdf5837db60472ef82e1d3ce9b11e9f5 from #83739\r\n\r\n---\r\n\r\nThis PR adds content for profiling and tracing, updates the Pyroscope data source content, and adds link to new content in the Pyroscope docs for the span traces configuration. \r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [X] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/profiling",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83439,
        "title": "Docs: Edit Configure panel options",
        "body": "Content additions and copy edits\r\nTo be merged into branch from PR https://github.com/grafana/grafana/pull/83438\r\n\r\n**TO DO** (after approval)\r\n- [x]  Merge into PR https://github.com/grafana/grafana/pull/83438",
        "labels": [
            "no-changelog",
            "type/docs",
            "no-backport"
        ]
    },
    {
        "number": 83928,
        "title": "Embed two visualization videos from the Grafana for Beginners series",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83234,
        "title": "[v10.4.x] Alerting: Fix saving evaluation group.",
        "body": "Backport 2a1873f03815f5ea26da31be7e5157a2c3f171a4 from #83188\n\n---\n\n**What is this feature?**\r\n\r\nThis PR fix evaluation group modal. \r\nThe bug was introduced by this [PR](https://github.com/grafana/grafana/pull/81665) was applied (we were comparing the namespace name without taking in account that in grafana managed groups it has been encoded.)\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/alerting",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83188,
        "title": "Alerting: Fix saving evaluation group.",
        "body": "**What is this feature?**\r\n\r\nThis PR fix evaluation group modal. \r\nThe bug was introduced by this [PR](https://github.com/grafana/grafana/pull/81665) was applied (we were comparing the namespace name without taking in account that in grafana managed groups it has been encoded.)\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/alerting",
            "type/bug"
        ]
    },
    {
        "number": 83141,
        "title": "Alerting docs: Fix migrating alert links",
        "body": "fixes broken links by adding docs ref section\r\nupdates * and _",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport"
        ]
    },
    {
        "number": 83554,
        "title": "[v10.4.x] Docs: Add missing visualizations to Grafana vizualization index page",
        "body": "Backport e8df62941ba12c9a3b2e189f3e4d849b109d5522 from #83351\n\n---\n\nThere were 3 visualization types missing in the list. Added: Geomap, Canvas and Gauge.\r\nHope the links work, just added them at the bottom, although Gauge was already there.\r\n\r\n**What is this feature?**\r\n\r\nNoticed there were some visualizations missing in the list.\r\nI am thinking for a future PR to sort the visualizations alphabetically for ease when trying to find them instead of the weird sections: Misc, Stats, Graphs, etc. This would match the left menu as well, although for some reason Time series is not alphabetical.\r\n\r\n**Why do we need this feature?**\r\n\r\nThe items are missing in the doc.\r\n\r\n**Who is this feature for?**\r\n\r\nEveryone\r\n\r\n**Which issue(s) does this PR fix?**:\r\nNo issue open.\r\n\r\n**Special notes for your reviewer:**\r\nI just added the links at the bottom. I hope they work.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84013,
        "title": "[v10.4.x] Docs: comment in SSO for terraform video",
        "body": "Backport 4bb5915183a8cf96199a24dd730b841c67cb0743 from #83978\n\n---\n\nAdds SSO for Terraform back into What's new. The video was previously commented out because it wasn't correctly titled.",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84587,
        "title": "[v10.4.x] InfluxDB: Fix sql query generation by adding quotes around the identifiers",
        "body": "Backport dc4c539d4626fa96a475401c1bc69d698775b494 from #83765\n\n---\n\n**What is this feature?**\r\n\r\nIn general, it works without quotes too but when you have a capital letter in your identifiers then it gets broken. To handle that and match with the documentation we add quotes around the identifiers. See the documentation https://docs.influxdata.com/influxdb/cloud-serverless/reference/sql/select/\r\n\r\n**Why do we need this feature?**\r\n\r\nfor better querying experience\r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB SQL users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/grafana/issues/83717\r\n\r\n**Special notes for your reviewer:**\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84532,
        "title": "Docs: add alt text",
        "body": null,
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84181,
        "title": "[v10.4.x] Auth: Only call rotate token if we have a session expiry cookie",
        "body": "Backport 4272483c54a55d807788c163963b70071343eba4 from #84169\n\n---\n\n**What is this feature?**\r\nWhen getting a 401 response we always tried to rotate token. This works correctly as long as a user has a sessions cookie. But there are cases when a user don't have one (anonymous and auth proxy). When the server respond with a 401 this is causing a infinite reload loop for that page.\r\n\r\nTo solve this we only call rotate token if we have a _session expiry cookie_ and in all other cases we call `GET /api/login/ping` to determine if user is authenticated.\r\n\r\nFor 10.3.x and below this can be mitigated by disabling the feature toggle. But in 10.4.x the toggle is removed and this is the default behaviour.\r\n\r\n**Why do we need this feature?**\r\nTo solve issue with infinite page reload loop for users without a sessions.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 83124,
        "title": "Docs: update import troubleshoot dashboards links",
        "body": "This PR:\r\n\r\n- Replaces links pointing to import/export dashboards content that was previously on the [Manage dashboards](https://grafana.com/docs/grafana/latest/dashboards/manage-dashboards/)\r\n- Addes orphaned export content to [Share dashboards and panels](https://grafana.com/docs/grafana/latest/dashboards/share-dashboards-panels/)\r\n- Replaces Grafana docs links with Grafana Cloud docs links\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x",
            "backport v10.3.x"
        ]
    },
    {
        "number": 83765,
        "title": "InfluxDB: Fix sql query generation by adding quotes around the identifiers",
        "body": "**What is this feature?**\r\n\r\nIn general, it works without quotes too but when you have a capital letter in your identifiers then it gets broken. To handle that and match with the documentation we add quotes around the identifiers. See the documentation https://docs.influxdata.com/influxdb/cloud-serverless/reference/sql/select/\r\n\r\n**Why do we need this feature?**\r\n\r\nfor better querying experience\r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB SQL users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes https://github.com/grafana/grafana/issues/83717\r\n\r\n**Special notes for your reviewer:**\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug"
        ]
    },
    {
        "number": 84326,
        "title": "[DOC] V10.4 loki query tempo deprecate",
        "body": "**What is this feature?**\r\n\r\nAdds a deprecation warning for the Loki query tab deprecation in the Tempo data source docs. \r\n\r\n\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [X] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "no-backport"
        ]
    },
    {
        "number": 83989,
        "title": "Release: Bump version to 10.4.1",
        "body": "Executed:\n\n\t\tnpm version 10.4.1 --no-git-tag-version\n\n\t\tyarn install\n\n\t\tyarn run lerna version 10.4.1 --no-push --no-git-tag-version --force-publish --exact --yes\n\n\t\tyarn install --mode update-lockfile\n\t\t",
        "labels": [
            "no-changelog",
            "datasource/Tempo",
            "datasource/grafana-pyroscope",
            "area/frontend",
            "no-backport",
            "datasource/GoogleCloudMonitoring",
            "datasource/Azure"
        ]
    },
    {
        "number": 83159,
        "title": "[v10.4.x] Alerting docs: adds simplified alert routing",
        "body": "Backport d091e4c264fa66dd8387628ff3f09c9d89c334cf from #82158\n\n---\n\ndocs for simplified alert routing",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84396,
        "title": "[v10.4.x] docs: update angular guidance",
        "body": "Backport d3ef762cb99b0c31e7de1c8056729c1d41dfaf5e from #84363\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nMinor docs update to surface more user-facing information\r\n\r\n**Why do we need this feature?**\r\n\r\nFeedback that this page is confusing for end users\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83978,
        "title": "Docs: comment in SSO for terraform video",
        "body": "Adds SSO for Terraform back into What's new. The video was previously commented out because it wasn't correctly titled.",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83999,
        "title": "[v10.4.x] Configure Grafana docs: fix custom configuration file location",
        "body": "Backport ce827f951815c941609a89b03c02e30eb748df23 from #83169\n\n---\n\n\r\n\r\nThe custom configuration file is `config.ini`, not `defaults.ini`, if I understood the following instructions and the [upgrade guide](https://grafana.com/docs/grafana/latest/upgrade-guide/upgrade-v10.3/#back-up-the-grafana-configuration-file) correctly. \r\n\r\n\r\nFor reference, this was previously changed in #39598",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83924,
        "title": "Alerting docs: update file provisioning guide",
        "body": "Update [Use configuration files to provision alerting resources](https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/): \r\n\r\n- Align to the updated structure of the [Provision with Terraform documentation](https://grafana.com/docs/grafana/next/alerting/set-up/provision-alerting-resources/terraform-provisioning/)\r\n- Reference to demo examples:  [Docker Compose](https://github.com/grafana/provisioning-alerting-examples/tree/main/config-files) and [Kubernetes](https://github.com/grafana/provisioning-alerting-examples/tree/main/kubernetes).\r\n- Remove `File provisioning using Kubernetes` and refer to the example.\r\n\r\n\r\nRelates to https://github.com/grafana/grafana/pull/83875",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/alerting",
            "type/docs"
        ]
    },
    {
        "number": 84506,
        "title": "[v10.4.x] Chore: Removing error object from tracking",
        "body": "Backport 6bc662e53b341504b95564beb74c5361ba8edbee from #84500\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWe don't need to pass down the whole error object to the rudderstack tracking, so removing it until we find out what exactly we want to pass down.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 83688,
        "title": "[v10.4.x] Tempo: Better fallbacks for metrics query",
        "body": "Backport 036e19037ed702bf4b63f16cc8b3b6f9d7b785db from #83619\n\n---\n\n\r\n**What is this feature?**\r\n\r\nThis PR fixes a couple of bugs we were seeing when Tempo returned no labels or labels with empty values for a specific query when using the metrics endpoint.\r\n\r\nWhen there are no labels and the results contains a single series, we fallback to the query string, to mimic the Prometheus datasource.\r\n\r\nWhen the value for a label is an empty string we force the series name to be `\"\"` since this is the actual value of the label. In Tempo the values are typed so we know that `\"\"` is the value of empty string instead of the absence of value. \r\n\r\n**Why do we need this feature?**\r\n\r\nWe were seeing errors and undesired behaviours when querying the metrics endpoint of Tempo.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers of the Tempo datasource. \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes https://github.com/grafana/tempo/issues/3429\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "datasource/Tempo",
            "area/frontend",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84500,
        "title": "Chore: Removing error object from tracking",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWe don't need to pass down the whole error object to the rudderstack tracking, so removing it until we find out what exactly we want to pass down.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/frontend",
            "backport v10.1.x",
            "backport v10.3.x",
            "backport v10.2.x",
            "type/bug"
        ]
    },
    {
        "number": 84265,
        "title": "Users: Add back check for undefined / null for value for `lastSeenAtAge` in table view",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWith https://github.com/grafana/grafana/pull/84247, we removed a defensive check for `undefined` for the `LastSeenAtAge` field being populated from the backend.\r\n\r\nThis PR adds the check back.",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport v10.4.x",
            "area/frontend"
        ]
    },
    {
        "number": 83893,
        "title": "Serviceaccounts: Add ability to add samename SA for different orgs",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWe are checking for login name across orgs when we create Service accounts, this implementation adds the orgID as a \"middle prefix\". \r\n\r\n**NOTE:** We could add it as a suffix instead. Just implementation details\r\n\r\nhttps://github.com/grafana/grafana/issues/83889\r\n\r\nmigrations tested on:\r\n- sqlite \u2705 \r\n- mysql \u2705 \r\n- postgres \u2705 \r\n\r\ntesting done via:\r\n```bash\r\nmake devenv sources=postgres\r\nmake devenv sources=mysql\r\n```\r\n\r\nremoved the migration, inserted a service account and rerun grafana.",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/backend",
            "area/backend/db/migration",
            "type/bug"
        ]
    },
    {
        "number": 83438,
        "title": "Docs: restructure Configure panel options",
        "body": "This PR does the following:\r\n\r\n- Removes **View JSON panel** and **Edit panel** sections\r\n- Reformats **Add title and description** task into a reference section to cover all settings in the **Panel options** part of the UI\r\n- Updates intro bullet list to match content\r\n\r\n**Out of scope**: Content additions or copy edits; those will be done on a new PR branched off this branch; then merged back in.\r\n\r\n**TO DO**\r\n\r\n- [x]  Get this PR approved\r\n- [x]  Get PR https://github.com/grafana/grafana/pull/83439 approved (content additions & updates)\r\n- [x]  Merge PR https://github.com/grafana/grafana/pull/83439 into this branch",
        "labels": [
            "area/dataviz",
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84771,
        "title": "[v10.4.x] Visualizations-TablePanel: added YouTube link to Table Panel",
        "body": "Backport e011c60a759e7e42bd58f705d0fe1478a73603d9 from #84533\n\n---\n\n**What is this feature?**\r\n\r\nA video was published about the Table panel visualizations.\r\nAdded the YouTube link to the Table Panel Visualization page.\r\n\r\n**Why do we need this feature?**\r\n\r\nAdd capacity to users to view how the steps are done.\r\n\r\n**Who is this feature for?**\r\n\r\nEveryone checking the docs about Table Panels.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nN/A\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83977,
        "title": "[v10.4.x] Docs: comment youtube videos back in",
        "body": "Backport 316601258a7d7a614f30f1c4293a91090ce32bf1 from #83974\n\n---\n\nMaking videos visible. The videos were previously commented out because they weren't correctly titled.",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83957,
        "title": "[v10.4.x] Alerting docs: update file provisioning guide",
        "body": "Backport 2653bd8fabb4b7147f1e90b1f10acca5b8dfe279 from #83924\r\n\r\n---\r\n\r\nUpdate [Use configuration files to provision alerting resources](https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/file-provisioning/): \r\n\r\n- Align to the updated structure of the [Provision with Terraform documentation](https://grafana.com/docs/grafana/next/alerting/set-up/provision-alerting-resources/terraform-provisioning/)\r\n- Reference to demo examples:  [Docker Compose](https://github.com/grafana/provisioning-alerting-examples/tree/main/config-files) and [Kubernetes](https://github.com/grafana/provisioning-alerting-examples/tree/main/kubernetes).\r\n- Remove `File provisioning using Kubernetes` and refer to the example.\r\n\r\n\r\nRelates to https://github.com/grafana/grafana/pull/83875\r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83622,
        "title": "[v10.4.x] docs: link annotation queries video to documentation",
        "body": "Backport ba4470dd7d39b3561ca25fda6f716fe5853ee5dd from #83586\n\n---\n\n**What is this feature?**\r\n\r\nEmbed https://www.youtube.com/watch?v=2istdJpPj2Y to Grafana docs\r\n\r\n**Why do we need this feature?**\r\n\r\nTo drive traffic to our YouTube channel from the docs\r\n\r\n**Who is this feature for?**\r\n\r\nUsers who want to add annotation queries to their dashboards\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83953,
        "title": "[v10.4.x] Serviceaccounts: Add ability to add samename SA for different orgs",
        "body": "Backport e611a736ed8a57e45c737fe6efdfffbe76084cb1 from #83893\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nWe are checking for login name across orgs when we create Service accounts, this implementation adds the orgID as a \"middle prefix\". \r\n\r\n**NOTE:** We could add it as a suffix instead. Just implementation details\r\n\r\nhttps://github.com/grafana/grafana/issues/83889\r\n\r\nmigrations tested on:\r\n- sqlite \u2705 \r\n- mysql \u2705 \r\n- postgres \u2705 \r\n\r\ntesting done via:\r\n```bash\r\nmake devenv sources=postgres\r\nmake devenv sources=mysql\r\n```\r\n\r\nremoved the migration, inserted a service account and rerun grafana.",
        "labels": [
            "add to changelog",
            "area/backend",
            "area/backend/db/migration",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83111,
        "title": "Snapshots: delete from same org",
        "body": "Make sure we are in the right org before delete",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84228,
        "title": "[v10.4.x] docs: update angular deprecation notice",
        "body": "Backport efbcd53119efffd6e9509845f1d54b5369fcac1e from #84227\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAligns dates for angular support removal\r\n\r\n**Why do we need this feature?**\r\n\r\nSo users understand the timeline for angular support removal\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83898,
        "title": "Backport alerting docs changes to v10.4.x",
        "body": "Cherry picks:\r\n- eb25b669c6a3aca8f5bda80f59762e1b5d6580e5\r\n- c3c6ee4dcaa3ed1770ddf29b417698e19e6c1070\r\n- 244589d7eac0fa839c74560e9205ccf8da7bcf87\r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs"
        ]
    },
    {
        "number": 82158,
        "title": "Alerting docs: adds simplified alert routing",
        "body": "docs for simplified alert routing",
        "labels": [
            "backport v10.4.x",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84581,
        "title": "[v10.4.x] Docs: add alt text",
        "body": "Backport d06e73ac2891279d8802848124f1a5652abc9b9a from #84532",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83169,
        "title": "Configure Grafana docs: fix custom configuration file location",
        "body": "\r\n\r\nThe custom configuration file is `config.ini`, not `defaults.ini`, if I understood the following instructions and the [upgrade guide](https://grafana.com/docs/grafana/latest/upgrade-guide/upgrade-v10.3/#back-up-the-grafana-configuration-file) correctly. \r\n\r\n\r\nFor reference, this was previously changed in #39598",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "backport v10.1.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport v10.0.x"
        ]
    },
    {
        "number": 84511,
        "title": "[v10.4.x] ExtSvcAccounts: FIX prevent service account deletion",
        "body": "Backport 2795f9827a8a6e41e6fb6484e999e654fbaa4ea6 from #84502\n\n---\n\n**What is this feature?**\r\n\r\nExternal Service Accounts are service accounts automatically created for plugins that request it. They are managed by Grafana and should not be tampered with.\r\n\r\nTo prevent their alteration, we check the login. Sadly with https://github.com/grafana/grafana/pull/83893/ we changed the service accounts login format and now external service accounts are not detected as protected anymore.\r\n\r\nThis PR intends to fix that issue.\r\n\r\nAdditionally this PR fixes another issue: service accounts permissions and assignments were never deleted.\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nNot particularly proud of that one, this is too brittle... Maybe it's be better to had a column to state they are protected.\r\n\r\nAlso we should have an integration test \"Create external service account\" \"Try to delete it through API\" that uses the real services not mocks.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "add to changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83820,
        "title": "[v10.4.x] Alerting docs: update the Terraform Provision guide",
        "body": "Backport 111df1bba0efb85f7a4a3d7e54afe485cc30ff37 from #83773\r\n\r\n---\r\n\r\nUpdate the guide: [Use Terraform to provision alerting resources](https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/)\r\n\r\n- simplify examples\r\n- remove details specified in other docs\r\n- reorder structure\r\n- highlight the [example using Grafana OSS and Docker Compose](https://github.com/grafana/provisioning-alerting-examples/tree/main/terraform)\r\n- add more examples\r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83170,
        "title": "[v10.4.x] Snapshots: delete from same org",
        "body": "Backport 809c1eaddb7f66260c799b402486a19748c65108 from #83111\n\n---\n\nMake sure we are in the right org before delete",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83682,
        "title": "[v10.4.x] Fix typos",
        "body": "Backport 2a429cd7db84d2783311b81c6334260107922fce from #83621\r\n\r\n---\r\n\r\nFix typos\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport",
            "pr/external"
        ]
    },
    {
        "number": 84290,
        "title": "SSO: fix mergeSettings() in case the DB contains empty URLs",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nPreviously, the empty URLs from the DB settings were not replaced by the URLs defined in the system settings. This was an issue for providers that require clients to send empty values for auth_url, token_url and api_url. The expectation in that case was that the auth_url, token_url and api_url would get their values from the system settings but that didn't happen if clients sent empty values for those settings. It worked only if clients didn't send them at all.\r\n\r\n**Why do we need this feature?**\r\n\r\nThis is a fix for the escalation https://github.com/grafana/support-escalations/issues/9668.\r\n\r\n**Who is this feature for?**\r\n\r\nFor everybody using SSO Settings API.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84216,
        "title": "[v10.4.x] Docs: add missing alt text",
        "body": "Backport e2cc5e57e59530cf0d7e0f8a978bc434c728b3a4 from #84102\n\n---\n\nAdds missing alt text to image in What's new 10.3",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84502,
        "title": "ExtSvcAccounts: FIX prevent service account deletion",
        "body": "**What is this feature?**\r\n\r\nExternal Service Accounts are service accounts automatically created for plugins that request it. They are managed by Grafana and should not be tampered with.\r\n\r\nTo prevent their alteration, we check the login. Sadly with https://github.com/grafana/grafana/pull/83893/ we changed the service accounts login format and now external service accounts are not detected as protected anymore.\r\n\r\nThis PR intends to fix that issue.\r\n\r\nAdditionally this PR fixes another issue: service accounts permissions and assignments were never deleted.\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nNot particularly proud of that one, this is too brittle... Maybe it's be better to had a column to state they are protected.\r\n\r\nAlso we should have an integration test \"Create external service account\" \"Try to delete it through API\" that uses the real services not mocks.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "add to changelog",
            "type/bug",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83627,
        "title": "[v10.4.x] Review \"Team LBAC\" page",
        "body": "Backport acf97e43b664cf966f4c85d53580e4a5573e59cc from #83406\r\n\r\n---\r\n\r\n- Use semantic line breaks for better line-based diffing in GitHub in the future.\r\n- Use consistent and ordered heading levels.\r\n- Avoid first person.\r\n- Generally avoid passive voice.\r\n- Remove FAQ section as all the questions are answered elsewhere in the page.\r\n\r\nCloses https://github.com/grafana/writers-toolkit/issues/542\r\n\r\nSigned-off-by: Jack Baldry <jack.baldry@grafana.com>\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84197,
        "title": "[v10.4.x] Dashboard: Fix issue where out-of-view shared query panels caused blank dependent panels",
        "body": "Backport d8b8a2c2b0c4e56739ae4d77f70b014d7e2fb690 from #83966\n\n---\n\nComing from an [escalation](https://github.com/grafana/support-escalations/issues/9555)\r\n\r\nFixes an issue where if we have a dashboard with panels using the dashboard data source whose source panel is out of view, those first panels show as empty.",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/dashboard",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83592,
        "title": "Elasticsearch: Fix adhoc filters not applied in frontend mode",
        "body": "**What is this feature?**\r\n\r\nThis PR fixes a bug where ad-hoc filters are not applied when Elasticsearch is querying in frontend mode.",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "datasource/Elasticsearch",
            "backport v10.3.x",
            "backport v10.2.x",
            "product-approved",
            "type/bug"
        ]
    },
    {
        "number": 84363,
        "title": "docs: update angular guidance",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nMinor docs update to surface more user-facing information\r\n\r\n**Why do we need this feature?**\r\n\r\nFeedback that this page is confusing for end users\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83966,
        "title": "Dashboard: Fix issue where out-of-view shared query panels caused blank dependent panels",
        "body": "Coming from an [escalation](https://github.com/grafana/support-escalations/issues/9555)\r\n\r\nFixes an issue where if we have a dashboard with panels using the dashboard data source whose source panel is out of view, those first panels show as empty.",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/dashboard",
            "backport v10.3.x",
            "backport v10.2.x",
            "type/bug"
        ]
    },
    {
        "number": 84585,
        "title": "[v10.4.x] InfluxDB: Fix escaping template variable when it was used in parentheses",
        "body": "Backport 6fab62739d9ca7b48c231fd546a19c8058805a40 from #83400\n\n---\n\n**What is this feature?**\r\n\r\nWhen you have a template variable that is not a \"multi-value\" but has \"include all option\" and use it in parentheses it isn't properly escaped. This PR is fixing this by updating the matcher regex pattern. \r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB users\r\n\r\n## How to test\r\nSet up a variable as shown:\r\n![image](https://github.com/grafana/grafana/assets/820946/587e2a00-3769-4b1b-ac39-9581852438b3)\r\n\r\nUse it as shown:\r\nWith parentheses\r\n![image](https://github.com/grafana/grafana/assets/820946/eea741bb-6387-4cbe-8ea7-84c19cf2444c)\r\n\r\nWithout parentheses\r\n![image](https://github.com/grafana/grafana/assets/820946/5a39f821-09f6-44c0-9576-e3b3b50554f7)\r\n\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83245,
        "title": "[v10.4.x] Docs: update import troubleshoot dashboards links",
        "body": "Backport 5f41cc632ea404f5b6adf6b60a021fc75182d63c from #83124\n\n---\n\nThis PR:\r\n\r\n- Replaces links pointing to import/export dashboards content that was previously on the [Manage dashboards](https://grafana.com/docs/grafana/latest/dashboards/manage-dashboards/)\r\n- Addes orphaned export content to [Share dashboards and panels](https://grafana.com/docs/grafana/latest/dashboards/share-dashboards-panels/)\r\n- Replaces Grafana docs links with Grafana Cloud docs links\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84220,
        "title": "[v10.4.x] Docs: fix broken link",
        "body": "Backport ffd0bdafe4848ce043460aa9e3b1da381dde6550 from #84103",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84103,
        "title": "Docs: fix broken link",
        "body": null,
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83621,
        "title": "Fix typos",
        "body": "Fix typos",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "backport v10.1.x",
            "type/docs",
            "backport v10.3.x",
            "pr/external",
            "backport v10.2.x"
        ]
    },
    {
        "number": 80390,
        "title": "Docs/grafana helm",
        "body": "The purpose of this PR is to create new documentation on how to install Grafana using Helm.\r\n\r\nThis is a new documentation from scratch.\r\n\r\n\r\nPlease check that:\r\n- [] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "type/project",
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83838,
        "title": "[v10.4.x] alerting:clarify silence preview",
        "body": "Backport 89575f1df42cb5b9f2a4316201c75ad219488353 from #83754\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n- clarifies that the silence preview feature applies to alerts that would be firing at that time\r\n- describes where the user would see any matching alerts in the Add silence section ( (**Affected alert instances**)\r\n\r\n**Why do we need this feature?**\r\n\r\nsee  #79886\r\n\r\n**Who is this feature for?**\r\n\r\n\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84227,
        "title": "docs: update angular deprecation notice",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nAligns dates for angular support removal\r\n\r\n**Why do we need this feature?**\r\n\r\nSo users understand the timeline for angular support removal\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83400,
        "title": "InfluxDB: Fix escaping template variable when it was used in parentheses",
        "body": "**What is this feature?**\r\n\r\nWhen you have a template variable that is not a \"multi-value\" but has \"include all option\" and use it in parentheses it isn't properly escaped. This PR is fixing this by updating the matcher regex pattern. \r\n\r\n**Who is this feature for?**\r\n\r\nInfluxDB users\r\n\r\n## How to test\r\nSet up a variable as shown:\r\n![image](https://github.com/grafana/grafana/assets/820946/587e2a00-3769-4b1b-ac39-9581852438b3)\r\n\r\nUse it as shown:\r\nWith parentheses\r\n![image](https://github.com/grafana/grafana/assets/820946/eea741bb-6387-4cbe-8ea7-84c19cf2444c)\r\n\r\nWithout parentheses\r\n![image](https://github.com/grafana/grafana/assets/820946/5a39f821-09f6-44c0-9576-e3b3b50554f7)\r\n\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "datasource/InfluxDB",
            "type/bug"
        ]
    },
    {
        "number": 83754,
        "title": "alerting:clarify silence preview",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n- clarifies that the silence preview feature applies to alerts that would be firing at that time\r\n- describes where the user would see any matching alerts in the Add silence section ( (**Affected alert instances**)\r\n\r\n**Why do we need this feature?**\r\n\r\nsee  #79886\r\n\r\n**Who is this feature for?**\r\n\r\n\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/alerting",
            "backport v10.1.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83186,
        "title": "[v10.4.x] Alerting: Protect possible undefined",
        "body": "Backport 16dee3cf1c540f9cffbc1a01aa275fb15a143300 from #83128\n\n---\n\nThis PR fixes alert state history being broken after this [change](https://github.com/grafana/grafana/pull/82278/files#diff-23046d32c83cdf7ec1154f83c428c5d4bb99afc8dcb0790bc070fa5133a14afbR62).\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "area/alerting",
            "no-backport",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83946,
        "title": "Docs: fix commented out Slack team names",
        "body": "Adds a space so commented out Slack teams are properly rendered.\r\n\r\nFixes an issue where an error is displayed:\r\n![image](https://github.com/grafana/grafana/assets/76437239/ee2db548-d522-431b-a033-3d6363d32722)\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84093,
        "title": "[v10.4.x] docs: adds alt text to images where missing",
        "body": "Backport 8c7090bc110be5b651d02894a050dd33f331a021 from #84028\n\n---\n\nThis PR adds alt text to images where it is missing.\r\n\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84344,
        "title": "[v10.4.x] SSO: fix mergeSettings() in case the DB contains empty URLs",
        "body": "Backport 2acd48d1c2f86c584d60871cd59d36fd4db95746 from #84290\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nPreviously, the empty URLs from the DB settings were not replaced by the URLs defined in the system settings. This was an issue for providers that require clients to send empty values for auth_url, token_url and api_url. The expectation in that case was that the auth_url, token_url and api_url would get their values from the system settings but that didn't happen if clients sent empty values for those settings. It worked only if clients didn't send them at all.\r\n\r\n**Why do we need this feature?**\r\n\r\nThis is a fix for the escalation https://github.com/grafana/support-escalations/issues/9668.\r\n\r\n**Who is this feature for?**\r\n\r\nFor everybody using SSO Settings API.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83773,
        "title": "Alerting docs: update the Terraform Provision guide",
        "body": "Update the guide: [Use Terraform to provision alerting resources](https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/)\r\n\r\n- simplify examples\r\n- remove details specified in other docs\r\n- reorder structure\r\n- highlight the [example using Grafana OSS and Docker Compose](https://github.com/grafana/provisioning-alerting-examples/tree/main/terraform)\r\n- add more examples",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/alerting",
            "type/docs",
            "backport v10.3.x"
        ]
    },
    {
        "number": 84028,
        "title": "docs: adds alt text to images where missing",
        "body": "This PR adds alt text to images where it is missing.\r\n\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83404,
        "title": "[v10.4.x] Annotations: Improve query performance when using dashboard filter",
        "body": "Backport e7a1ecca289a17a56d6c175a9ff073e1ae61ee1a from #83112\n\n---\n\n**What is this feature?**\r\n\r\nThis PR improves `GET /api/annotations` enpoint performance by using dashboard UID filter if it's provided in the request. In most of cases we query annotations from a specific dashboard, so we can use UID as a filter. \r\n\r\n**Why do we need this feature?**\r\n\r\nBy default, authorization function fetches all the dashboards available for user (for the filtering purpose). It doesn't work on a large scale when number of dashboards is significant (thousands).\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/backend",
            "area/annotations",
            "type/performance",
            "area/auth/rbac",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83974,
        "title": "Docs: comment youtube videos back in",
        "body": "Making videos visible. The videos were previously commented out because they weren't correctly titled.",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83429,
        "title": "[v10.4.x] Docs/grafana helm",
        "body": "Backport 9f88a883032bf53205fd2f0b941d18727f67676e from #80390\n\n---\n\nThe purpose of this PR is to create new documentation on how to install Grafana using Helm.\r\n\r\nThis is a new documentation from scratch.\r\n\r\n\r\nPlease check that:\r\n- [] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "type/project",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83586,
        "title": "docs: link annotation queries video to documentation",
        "body": "**What is this feature?**\r\n\r\nEmbed https://www.youtube.com/watch?v=2istdJpPj2Y to Grafana docs\r\n\r\n**Why do we need this feature?**\r\n\r\nTo drive traffic to our YouTube channel from the docs\r\n\r\n**Who is this feature for?**\r\n\r\nUsers who want to add annotation queries to their dashboards\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "backport v10.1.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83112,
        "title": "Annotations: Improve query performance when using dashboard filter",
        "body": "**What is this feature?**\r\n\r\nThis PR improves `GET /api/annotations` enpoint performance by using dashboard UID filter if it's provided in the request. In most of cases we query annotations from a specific dashboard, so we can use UID as a filter. \r\n\r\n**Why do we need this feature?**\r\n\r\nBy default, authorization function fetches all the dashboards available for user (for the filtering purpose). It doesn't work on a large scale when number of dashboards is significant (thousands).\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/backend",
            "area/annotations",
            "type/performance",
            "backport v10.3.x",
            "backport v10.2.x",
            "area/auth/rbac",
            "type/bug"
        ]
    },
    {
        "number": 83597,
        "title": "[v10.4.x] Elasticsearch: Fix adhoc filters not applied in frontend mode",
        "body": "Backport 411c89012febe13323e4b8aafc8d692f4460e680 from #83592\n\n---\n\n**What is this feature?**\r\n\r\nThis PR fixes a bug where ad-hoc filters are not applied when Elasticsearch is querying in frontend mode.",
        "labels": [
            "add to changelog",
            "area/frontend",
            "datasource/Elasticsearch",
            "product-approved",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83723,
        "title": "[v10.4.x] CI: Bump `alpine` image version",
        "body": "Backport c9d8d8713b6046024f33a527427a47674b754255 from #83716\r\n\r\n---\r\n\r\nBump `alpine` image to 3.19.1\r\n",
        "labels": [
            "type/ci",
            "no-changelog",
            "backport"
        ]
    },
    {
        "number": 84685,
        "title": "[v10.4.x] Elasticsearch: Fix legend for alerting, expressions and previously frontend queries",
        "body": "Backport 494d1699805ab603ccd9ef2f6ba7d28caa975088 from #84485\n\n---\n\nThe detailed investigation and decision on why are we producing different names for regular queries and for alerting/expression queries can be found in https://docs.google.com/document/d/1tW0E2Ol5E90KwFvK-FMgfLNs6ChRlSouw-PwyjVNh60/edit\r\n\r\nSummary: \r\nWe will have to use different naming for responses produced by regular queries vs produced by alerting and expression queries, which can be identified through headers - `FromAlert` and  `X-Grafana-From-Exp`. \r\n\r\nFor regular queries, we are going to use the same naming as was in frontend, which 100% produces the same experience through frontend and new backend - using `frame.Name` and deleting labels `valueField.Labels = nil`.\r\n\r\nFor alerting and expression queries, we are going to use the same naming convention as was done initially `field.SetConfig(&data.FieldConfig{DisplayNameFromDS: fieldName})`.\r\n\r\nTesting:\r\n\r\n1. Create alert with `gdev-elastic` and the preview should look like this - graph legend shouldn't have duplicated name and labels `{hostname=hostname1}...` should be visible\r\n\r\n<img width=\"1045\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/46bfd184-257f-4dd5-a905-db6a90b78962\">\r\n\r\n2. Import following dashboard that tests for 3 issues - correct functioning of transformations, fields overrides and server side expressions. \r\n\r\nhttps://github.com/grafana/grafana/assets/30407135/1aa605a9-1136-405a-b295-28d3c29e85f8\r\n\r\n```\r\n{\r\n  \"annotations\": {\r\n    \"list\": [\r\n      {\r\n        \"builtIn\": 1,\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"type\": \"dashboard\"\r\n      }\r\n    ]\r\n  },\r\n  \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\": 0,\r\n  \"id\": 880,\r\n  \"links\": [],\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"custom\": {\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            }\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 4,\r\n      \"options\": {\r\n        \"calculate\": false,\r\n        \"cellGap\": 1,\r\n        \"color\": {\r\n          \"exponent\": 0.5,\r\n          \"fill\": \"dark-orange\",\r\n          \"mode\": \"scheme\",\r\n          \"reverse\": false,\r\n          \"scale\": \"exponential\",\r\n          \"scheme\": \"Oranges\",\r\n          \"steps\": 64\r\n        },\r\n        \"exemplars\": {\r\n          \"color\": \"rgba(255,0,255,0.7)\"\r\n        },\r\n        \"filterValues\": {\r\n          \"le\": 1e-9\r\n        },\r\n        \"legend\": {\r\n          \"show\": true\r\n        },\r\n        \"rowsFrame\": {\r\n          \"layout\": \"unknown\"\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"showColorScale\": false,\r\n          \"yHistogram\": false\r\n        },\r\n        \"yAxis\": {\r\n          \"axisPlacement\": \"left\",\r\n          \"reverse\": false\r\n        }\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"label\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"auto\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"hide\": true,\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"hostname: hostname1\",\r\n          \"refId\": \"hostname1\",\r\n          \"timeField\": \"@timestamp\"\r\n        },\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"label\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"auto\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"hide\": true,\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"all\",\r\n          \"timeField\": \"@timestamp\"\r\n        },\r\n        {\r\n          \"datasource\": {\r\n            \"name\": \"Expression\",\r\n            \"type\": \"__expr__\",\r\n            \"uid\": \"__expr__\"\r\n          },\r\n          \"expression\": \"$hostname1/$all\",\r\n          \"hide\": false,\r\n          \"refId\": \"ratio\",\r\n          \"type\": \"math\"\r\n        }\r\n      ],\r\n      \"title\": \"Panel Title\",\r\n      \"type\": \"heatmap\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": [\r\n          {\r\n            \"matcher\": {\r\n              \"id\": \"byName\",\r\n              \"options\": \"hostname5\"\r\n            },\r\n            \"properties\": [\r\n              {\r\n                \"id\": \"custom.axisLabel\",\r\n                \"value\": \"this needs to be shown\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 2,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"hostname\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"6h\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"A\",\r\n          \"timeField\": \"@timestamp\"\r\n        }\r\n      ],\r\n      \"title\": \"overrides name \",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"thresholds\"\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 8\r\n      },\r\n      \"id\": 3,\r\n      \"options\": {\r\n        \"colorMode\": \"value\",\r\n        \"graphMode\": \"area\",\r\n        \"justifyMode\": \"auto\",\r\n        \"orientation\": \"auto\",\r\n        \"reduceOptions\": {\r\n          \"calcs\": [\r\n            \"lastNotNull\"\r\n          ],\r\n          \"fields\": \"\",\r\n          \"values\": false\r\n        },\r\n        \"showPercentChange\": false,\r\n        \"textMode\": \"auto\",\r\n        \"wideLayout\": true\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"6h\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"A\",\r\n          \"timeField\": \"@timestamp\"\r\n        }\r\n      ],\r\n      \"title\": \"transform + name\",\r\n      \"transformations\": [\r\n        {\r\n          \"id\": \"reduce\",\r\n          \"options\": {\r\n            \"includeTimeField\": false,\r\n            \"mode\": \"reduceFields\",\r\n            \"reducers\": [\r\n              \"last\",\r\n              \"min\"\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          \"id\": \"filterFieldsByName\",\r\n          \"options\": {}\r\n        }\r\n      ],\r\n      \"type\": \"stat\"\r\n    }\r\n  ],\r\n  \"schemaVersion\": 39,\r\n  \"tags\": [],\r\n  \"templating\": {\r\n    \"list\": []\r\n  },\r\n  \"time\": {\r\n    \"from\": \"now-6h\",\r\n    \"to\": \"now\"\r\n  },\r\n  \"timeRangeUpdatedDuringEditOrView\": false,\r\n  \"timepicker\": {},\r\n  \"timezone\": \"browser\",\r\n  \"title\": \"test es\",\r\n  \"uid\": \"edfmgdz48dqm8b\",\r\n  \"version\": 11,\r\n  \"weekStart\": \"\"\r\n}\r\n```\r\n\r\n<img width=\"1913\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/5aebebbb-1897-48c3-85db-87c49b1fd060\">\r\n\r\nAlso sanity check - that in our test dashboard, names are the same as frontend produced frames (this shouldn't change as we are not changing this logic)\r\n\r\n<img width=\"1476\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/752859eb-f7b9-4ddd-ab73-f7bc150fe2e4\">\r\n\r\n<img width=\"1500\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/53f83be8-12f3-4867-9669-bd461b093f47\">\r\n\r\n\r\nFixes: https://github.com/grafana/grafana/issues/84054\r\nFixes: https://github.com/grafana/grafana/issues/83968\r\n",
        "labels": [
            "add to changelog",
            "area/backend",
            "datasource/Elasticsearch",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84452,
        "title": "[v10.4.x] Chore: Bump update checker interval to 1 day",
        "body": "Backport 391d14d091e91301f95d6ce01ba8ca4dd4170b52 from #84404\n\n---\n\nIncrease the update checker interval. See [thread](https://raintank-corp.slack.com/archives/C05V3D0EPDZ/p1710351280643279) for details.",
        "labels": [
            "type/ci",
            "area/backend",
            "no-changelog",
            "backport"
        ]
    },
    {
        "number": 84533,
        "title": "Visualizations-TablePanel: added YouTube link to Table Panel",
        "body": "**What is this feature?**\r\n\r\nA video was published about the Table panel visualizations.\r\nAdded the YouTube link to the Table Panel Visualization page.\r\n\r\n**Why do we need this feature?**\r\n\r\nAdd capacity to users to view how the steps are done.\r\n\r\n**Who is this feature for?**\r\n\r\nEveryone checking the docs about Table Panels.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nN/A\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83376,
        "title": "Alerting docs: update Alerting Provisioning",
        "body": "- Add instructions to export missing alerting resources\r\n- Specify the alerting resource on the Export API endpoint table \r\n- Minor grammar changes for clarity\r\n- Give more visibility to other related examples\r\n- Ensure the instructions for importing alerting resources via config files are consistent\r\n\r\n\r\n<img width=\"379\" alt=\"Screenshot 2024-02-27 at 11 06 22\" src=\"https://github.com/grafana/grafana/assets/825430/d395c8c9-5504-440d-98bd-ceba7045e90f\">\r\n\r\n\r\n<img width=\"791\" alt=\"Screenshot 2024-02-27 at 11 06 35\" src=\"https://github.com/grafana/grafana/assets/825430/8d3bbc8a-e6b7-4073-a42d-f8aa2a1c2423\">\r\n\r\n<img width=\"329\" alt=\"Screenshot 2024-02-27 at 11 08 03\" src=\"https://github.com/grafana/grafana/assets/825430/741997b9-7ac8-4506-85cd-e571a6b5043c\">\r\n",
        "labels": [
            "no-changelog",
            "backport-failed",
            "area/alerting",
            "type/docs",
            "backport v10.3.x"
        ]
    },
    {
        "number": 84584,
        "title": "Alerting: Fix optional fields requiring validation rule",
        "body": "Prior to this PR an optional field with a custom validationRule would not allow the form to be completed without passing the (non-empty) validation rule.\r\n\r\nThis PR adds an additional check for empty optional fields when validation the regular expression in `validationRule`.\r\n\r\nFixes #84296",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/alerting",
            "type/bug"
        ]
    },
    {
        "number": 83628,
        "title": "[v10.4.x] Anonymous: Add docs for anon users charged on enterprise",
        "body": "Backport b89de96681f10cbced9d0aaa5d811bf5670e0d4c from #83626\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nAdd docs about anonymous users counting as Grafana Enterprise license users",
        "labels": [
            "type/docs",
            "no-changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84050,
        "title": "[v10.4.x] Alerting docs: update the supported export template functionality",
        "body": "Backport dbb55f291a79647f06827e6a6f9f51cd51c01506 from #83816\n\n---\n\nDocument the available functionality to export notification templates. ",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84102,
        "title": "Docs: add missing alt text",
        "body": "Adds missing alt text to image in What's new 10.3",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x",
            "backport v10.3.x"
        ]
    },
    {
        "number": 84398,
        "title": "Loki: Fix null pointer exception in case request returned an error",
        "body": "**What is this feature?**\r\n\r\nRecently we changed the response type in Loki's backend to always be a `backend.DataResponse`. This PR fixes the assumption that the object is always set.\r\n\r\n`runQuery` might return a nil pointer, e.g. [here](https://github.com/grafana/grafana/blob/3fb6319d1b8cae1d7e359572673117cb8268df63/pkg/tsdb/loki/api.go#L168) or [here](https://github.com/grafana/grafana/blob/3fb6319d1b8cae1d7e359572673117cb8268df63/pkg/tsdb/loki/api.go#L231).",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "datasource/Loki",
            "area/backend",
            "type/bug"
        ]
    },
    {
        "number": 84401,
        "title": "[v10.4.x] Loki: Fix null pointer exception in case request returned an error",
        "body": "Backport 34f9bff9e031cde4e7817611c373dcd9e19b4d75 from #84398\n\n---\n\n**What is this feature?**\r\n\r\nRecently we changed the response type in Loki's backend to always be a `backend.DataResponse`. This PR fixes the assumption that the object is always set.\r\n\r\n`runQuery` might return a nil pointer, e.g. [here](https://github.com/grafana/grafana/blob/3fb6319d1b8cae1d7e359572673117cb8268df63/pkg/tsdb/loki/api.go#L168) or [here](https://github.com/grafana/grafana/blob/3fb6319d1b8cae1d7e359572673117cb8268df63/pkg/tsdb/loki/api.go#L231).",
        "labels": [
            "add to changelog",
            "datasource/Loki",
            "area/backend",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83816,
        "title": "Alerting docs: update the supported export template functionality",
        "body": "Document the available functionality to export notification templates. ",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83655,
        "title": "[v10.4.x] Docs: restructure Configure panel options",
        "body": "Backport 2c95782b101db95d9e4deac29032ec5d987617f7 from #83438\n\n---\n\nThis PR does the following:\r\n\r\n- Removes **View JSON panel** and **Edit panel** sections\r\n- Reformats **Add title and description** task into a reference section to cover all settings in the **Panel options** part of the UI\r\n- Updates intro bullet list to match content\r\n\r\n**Out of scope**: Content additions or copy edits; those will be done on a new PR branched off this branch; then merged back in.\r\n\r\n**TO DO**\r\n\r\n- [x]  Get this PR approved\r\n- [x]  Get PR https://github.com/grafana/grafana/pull/83439 approved (content additions & updates)\r\n- [x]  Merge PR https://github.com/grafana/grafana/pull/83439 into this branch",
        "labels": [
            "area/dataviz",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83459,
        "title": "Alerting/Annotations: Prevent panics from composite store jobs from crashing Grafana",
        "body": "**What is this feature?**\r\n\r\nThis PR fixes a nil dereference panic in the Loki annotation store, and adds a panic handler to the composite store.\r\n\r\n**Why do we need this feature?**\r\n\r\nPanics (like this one) in the jobs launched from the composite store can crash the main Grafana process, so we need to recover from those panics in order to avoid this happening.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers who use a remote Loki instance for alert state history.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84169,
        "title": "Auth: Only call rotate token if we have a session expiry cookie",
        "body": "**What is this feature?**\r\nWhen getting a 401 response we always tried to rotate token. This works correctly as long as a user has a sessions cookie. But there are cases when a user don't have one (anonymous and auth proxy). When the server respond with a 401 this is causing a infinite reload loop for that page.\r\n\r\nTo solve this we only call rotate token if we have a _session expiry cookie_ and in all other cases we call `GET /api/login/ping` to determine if user is authenticated.\r\n\r\nFor 10.3.x and below this can be mitigated by disabling the feature toggle. But in 10.4.x the toggle is removed and this is the default behaviour.\r\n\r\n**Why do we need this feature?**\r\nTo solve issue with infinite page reload loop for users without a sessions.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/frontend",
            "backport v10.3.x",
            "type/bug"
        ]
    },
    {
        "number": 83664,
        "title": "[v10.4.x] Update angular-plugins.md",
        "body": "Backport 10721bfcd966176ecaf04127db983fa148d00881 from #83635\n\n---\n\nRemoves advice which only worked in `dev` instances.\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83128,
        "title": "Alerting: Protect possible undefined",
        "body": "This PR fixes alert state history being broken after this [change](https://github.com/grafana/grafana/pull/82278/files#diff-23046d32c83cdf7ec1154f83c428c5d4bb99afc8dcb0790bc070fa5133a14afbR62).\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/alerting",
            "no-backport",
            "type/bug"
        ]
    },
    {
        "number": 84823,
        "title": "[v10.4.x] alerting docs: slack integration",
        "body": "Backport 500840ab77a0a752c16f5fce97d84686b18db245 from #84476\r\n\r\n\r\nadditionally, it fixes a broken link and format issues\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 84485,
        "title": "Elasticsearch: Fix legend for alerting, expressions and previously frontend queries",
        "body": "The detailed investigation and decision on why are we producing different names for regular queries and for alerting/expression queries can be found in https://docs.google.com/document/d/1tW0E2Ol5E90KwFvK-FMgfLNs6ChRlSouw-PwyjVNh60/edit\r\n\r\nSummary: \r\nWe will have to use different naming for responses produced by regular queries vs produced by alerting and expression queries, which can be identified through headers - `FromAlert` and  `X-Grafana-From-Exp`. \r\n\r\nFor regular queries, we are going to use the same naming as was in frontend, which 100% produces the same experience through frontend and new backend - using `frame.Name` and deleting labels `valueField.Labels = nil`.\r\n\r\nFor alerting and expression queries, we are going to use the same naming convention as was done initially `field.SetConfig(&data.FieldConfig{DisplayNameFromDS: fieldName})`.\r\n\r\nTesting:\r\n\r\n1. Create alert with `gdev-elastic` and the preview should look like this - graph legend shouldn't have duplicated name and labels `{hostname=hostname1}...` should be visible\r\n\r\n<img width=\"1045\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/46bfd184-257f-4dd5-a905-db6a90b78962\">\r\n\r\n2. Import following dashboard that tests for 3 issues - correct functioning of transformations, fields overrides and server side expressions. \r\n\r\nhttps://github.com/grafana/grafana/assets/30407135/1aa605a9-1136-405a-b295-28d3c29e85f8\r\n\r\n```\r\n{\r\n  \"annotations\": {\r\n    \"list\": [\r\n      {\r\n        \"builtIn\": 1,\r\n        \"datasource\": {\r\n          \"type\": \"grafana\",\r\n          \"uid\": \"-- Grafana --\"\r\n        },\r\n        \"enable\": true,\r\n        \"hide\": true,\r\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\r\n        \"name\": \"Annotations & Alerts\",\r\n        \"type\": \"dashboard\"\r\n      }\r\n    ]\r\n  },\r\n  \"editable\": true,\r\n  \"fiscalYearStartMonth\": 0,\r\n  \"graphTooltip\": 0,\r\n  \"id\": 880,\r\n  \"links\": [],\r\n  \"panels\": [\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"custom\": {\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            }\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 4,\r\n      \"options\": {\r\n        \"calculate\": false,\r\n        \"cellGap\": 1,\r\n        \"color\": {\r\n          \"exponent\": 0.5,\r\n          \"fill\": \"dark-orange\",\r\n          \"mode\": \"scheme\",\r\n          \"reverse\": false,\r\n          \"scale\": \"exponential\",\r\n          \"scheme\": \"Oranges\",\r\n          \"steps\": 64\r\n        },\r\n        \"exemplars\": {\r\n          \"color\": \"rgba(255,0,255,0.7)\"\r\n        },\r\n        \"filterValues\": {\r\n          \"le\": 1e-9\r\n        },\r\n        \"legend\": {\r\n          \"show\": true\r\n        },\r\n        \"rowsFrame\": {\r\n          \"layout\": \"unknown\"\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"showColorScale\": false,\r\n          \"yHistogram\": false\r\n        },\r\n        \"yAxis\": {\r\n          \"axisPlacement\": \"left\",\r\n          \"reverse\": false\r\n        }\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"label\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"auto\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"hide\": true,\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"hostname: hostname1\",\r\n          \"refId\": \"hostname1\",\r\n          \"timeField\": \"@timestamp\"\r\n        },\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"label\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"auto\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"hide\": true,\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"all\",\r\n          \"timeField\": \"@timestamp\"\r\n        },\r\n        {\r\n          \"datasource\": {\r\n            \"name\": \"Expression\",\r\n            \"type\": \"__expr__\",\r\n            \"uid\": \"__expr__\"\r\n          },\r\n          \"expression\": \"$hostname1/$all\",\r\n          \"hide\": false,\r\n          \"refId\": \"ratio\",\r\n          \"type\": \"math\"\r\n        }\r\n      ],\r\n      \"title\": \"Panel Title\",\r\n      \"type\": \"heatmap\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"palette-classic\"\r\n          },\r\n          \"custom\": {\r\n            \"axisBorderShow\": false,\r\n            \"axisCenteredZero\": false,\r\n            \"axisColorMode\": \"text\",\r\n            \"axisLabel\": \"\",\r\n            \"axisPlacement\": \"auto\",\r\n            \"barAlignment\": 0,\r\n            \"drawStyle\": \"line\",\r\n            \"fillOpacity\": 0,\r\n            \"gradientMode\": \"none\",\r\n            \"hideFrom\": {\r\n              \"legend\": false,\r\n              \"tooltip\": false,\r\n              \"viz\": false\r\n            },\r\n            \"insertNulls\": false,\r\n            \"lineInterpolation\": \"linear\",\r\n            \"lineWidth\": 1,\r\n            \"pointSize\": 5,\r\n            \"scaleDistribution\": {\r\n              \"type\": \"linear\"\r\n            },\r\n            \"showPoints\": \"auto\",\r\n            \"spanNulls\": false,\r\n            \"stacking\": {\r\n              \"group\": \"A\",\r\n              \"mode\": \"none\"\r\n            },\r\n            \"thresholdsStyle\": {\r\n              \"mode\": \"off\"\r\n            }\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": [\r\n          {\r\n            \"matcher\": {\r\n              \"id\": \"byName\",\r\n              \"options\": \"hostname5\"\r\n            },\r\n            \"properties\": [\r\n              {\r\n                \"id\": \"custom.axisLabel\",\r\n                \"value\": \"this needs to be shown\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 12,\r\n        \"y\": 0\r\n      },\r\n      \"id\": 2,\r\n      \"options\": {\r\n        \"legend\": {\r\n          \"calcs\": [],\r\n          \"displayMode\": \"list\",\r\n          \"placement\": \"bottom\",\r\n          \"showLegend\": true\r\n        },\r\n        \"tooltip\": {\r\n          \"maxHeight\": 600,\r\n          \"mode\": \"single\",\r\n          \"sort\": \"none\"\r\n        }\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"hostname\",\r\n              \"id\": \"3\",\r\n              \"settings\": {\r\n                \"min_doc_count\": \"1\",\r\n                \"order\": \"desc\",\r\n                \"orderBy\": \"_term\",\r\n                \"size\": \"10\"\r\n              },\r\n              \"type\": \"terms\"\r\n            },\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"6h\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"A\",\r\n          \"timeField\": \"@timestamp\"\r\n        }\r\n      ],\r\n      \"title\": \"overrides name \",\r\n      \"type\": \"timeseries\"\r\n    },\r\n    {\r\n      \"datasource\": {\r\n        \"type\": \"elasticsearch\",\r\n        \"uid\": \"gdev-elasticsearch\"\r\n      },\r\n      \"fieldConfig\": {\r\n        \"defaults\": {\r\n          \"color\": {\r\n            \"mode\": \"thresholds\"\r\n          },\r\n          \"mappings\": [],\r\n          \"thresholds\": {\r\n            \"mode\": \"absolute\",\r\n            \"steps\": [\r\n              {\r\n                \"color\": \"green\",\r\n                \"value\": null\r\n              },\r\n              {\r\n                \"color\": \"red\",\r\n                \"value\": 80\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        \"overrides\": []\r\n      },\r\n      \"gridPos\": {\r\n        \"h\": 8,\r\n        \"w\": 12,\r\n        \"x\": 0,\r\n        \"y\": 8\r\n      },\r\n      \"id\": 3,\r\n      \"options\": {\r\n        \"colorMode\": \"value\",\r\n        \"graphMode\": \"area\",\r\n        \"justifyMode\": \"auto\",\r\n        \"orientation\": \"auto\",\r\n        \"reduceOptions\": {\r\n          \"calcs\": [\r\n            \"lastNotNull\"\r\n          ],\r\n          \"fields\": \"\",\r\n          \"values\": false\r\n        },\r\n        \"showPercentChange\": false,\r\n        \"textMode\": \"auto\",\r\n        \"wideLayout\": true\r\n      },\r\n      \"pluginVersion\": \"11.0.0-pre\",\r\n      \"targets\": [\r\n        {\r\n          \"alias\": \"\",\r\n          \"bucketAggs\": [\r\n            {\r\n              \"field\": \"@timestamp\",\r\n              \"id\": \"2\",\r\n              \"settings\": {\r\n                \"interval\": \"6h\"\r\n              },\r\n              \"type\": \"date_histogram\"\r\n            }\r\n          ],\r\n          \"datasource\": {\r\n            \"type\": \"elasticsearch\",\r\n            \"uid\": \"gdev-elasticsearch\"\r\n          },\r\n          \"metrics\": [\r\n            {\r\n              \"id\": \"1\",\r\n              \"type\": \"count\"\r\n            }\r\n          ],\r\n          \"query\": \"\",\r\n          \"refId\": \"A\",\r\n          \"timeField\": \"@timestamp\"\r\n        }\r\n      ],\r\n      \"title\": \"transform + name\",\r\n      \"transformations\": [\r\n        {\r\n          \"id\": \"reduce\",\r\n          \"options\": {\r\n            \"includeTimeField\": false,\r\n            \"mode\": \"reduceFields\",\r\n            \"reducers\": [\r\n              \"last\",\r\n              \"min\"\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          \"id\": \"filterFieldsByName\",\r\n          \"options\": {}\r\n        }\r\n      ],\r\n      \"type\": \"stat\"\r\n    }\r\n  ],\r\n  \"schemaVersion\": 39,\r\n  \"tags\": [],\r\n  \"templating\": {\r\n    \"list\": []\r\n  },\r\n  \"time\": {\r\n    \"from\": \"now-6h\",\r\n    \"to\": \"now\"\r\n  },\r\n  \"timeRangeUpdatedDuringEditOrView\": false,\r\n  \"timepicker\": {},\r\n  \"timezone\": \"browser\",\r\n  \"title\": \"test es\",\r\n  \"uid\": \"edfmgdz48dqm8b\",\r\n  \"version\": 11,\r\n  \"weekStart\": \"\"\r\n}\r\n```\r\n\r\n<img width=\"1913\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/5aebebbb-1897-48c3-85db-87c49b1fd060\">\r\n\r\nAlso sanity check - that in our test dashboard, names are the same as frontend produced frames (this shouldn't change as we are not changing this logic)\r\n\r\n<img width=\"1476\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/752859eb-f7b9-4ddd-ab73-f7bc150fe2e4\">\r\n\r\n<img width=\"1500\" alt=\"image\" src=\"https://github.com/grafana/grafana/assets/30407135/53f83be8-12f3-4867-9669-bd461b093f47\">\r\n\r\n\r\nFixes: https://github.com/grafana/grafana/issues/84054\r\nFixes: https://github.com/grafana/grafana/issues/83968\r\n",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/backend",
            "datasource/Elasticsearch",
            "backport v10.3.x",
            "type/bug"
        ]
    },
    {
        "number": 83635,
        "title": "Update angular-plugins.md",
        "body": "Removes advice which only worked in `dev` instances.\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\n[Add a brief description of what the feature or update does.]\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84596,
        "title": "[v10.4.x] Alerting/Annotations: Prevent panics from composite store jobs from crashing Grafana",
        "body": "Backport af528d2f660cc34c8b6e057d81a7c627166686c7 from #83459\n\n---\n\n**What is this feature?**\r\n\r\nThis PR fixes a nil dereference panic in the Loki annotation store, and adds a panic handler to the composite store.\r\n\r\n**Why do we need this feature?**\r\n\r\nPanics (like this one) in the jobs launched from the composite store can crash the main Grafana process, so we need to recover from those panics in order to avoid this happening.\r\n\r\n**Who is this feature for?**\r\n\r\nUsers who use a remote Loki instance for alert state history.\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "no-changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83123,
        "title": "Logs Panel: Add option extra UI functionality for log context",
        "body": "**What is this feature?**\r\n\r\nThis PR fixes a bug where the `closeCallback` was not properly called.\r\n\r\nFurthermore, it adds support for the `getLogRowContextUi` functionality. This allows log context in dashboards to show an extra UI e.g. for Loki data sources.\r\n\r\n**Special notes for your reviewer:**\r\n\r\n1. Open a logs panel in a dashboard\r\n2. Open log context\r\n3. You should see the extra filters for Loki now\r\n\r\nFYI, this fixes a bug, thus I am also backporting this to v10.4.x.",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "datasource/Loki",
            "area/panel/logs",
            "type/bug"
        ]
    },
    {
        "number": 83229,
        "title": "Chore: Query oauth info from a new instance",
        "body": "**What is this feature?**\r\n\r\nThis small PR avoids a settings race condition between the Google OAuth configuration settings and the SSO settings.\r\n\r\n**Why do we need this feature?**\r\n\r\nTo avoid a race condition.\r\n\r\n**Who is this feature for?**\r\n\r\nIAM\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n\r\n# Release notice breaking change\r\n\r\nWe're adding a validation between the response of the ID token HD parameter and the list of allowed domains as an extra layer of security. In the event that the HD parameter doesn't match the list of allowed domains, we're denying access to Grafana.\r\n\r\nIf you set Google OAuth configuration using `api_url,` you might be using the legacy implementation of OAuth, which doesn't have the HD parameter describing the organisation the approved token comes from. This could break your login flow.\r\n\r\nThis feature can be turned off through the configuration toggle `validate_hd `. Anyone using the legacy Google OAuth configuration should turn off this validation if the ID Token response doesn't have the HD parameter.\r\n",
        "labels": [
            "add to changelog",
            "backport-failed",
            "backport v10.4.x",
            "breaking change",
            "area/backend",
            "type/docs",
            "backport v10.3.x",
            "product-approved",
            "backport"
        ]
    },
    {
        "number": 83716,
        "title": "CI: Bump `alpine` image version",
        "body": "Bump `alpine` image to 3.19.1",
        "labels": [
            "backport v9.5.x",
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "type/ci",
            "backport v10.1.x",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport v10.0.x"
        ]
    },
    {
        "number": 83949,
        "title": "[v10.4.x] Docs: fix commented out Slack team names",
        "body": "Backport de563aa39cb90501f911d8a23a6ed9a6265e3c48 from #83946\n\n---\n\nAdds a space so commented out Slack teams are properly rendered.\r\n\r\nFixes an issue where an error is displayed:\r\n![image](https://github.com/grafana/grafana/assets/76437239/ee2db548-d522-431b-a033-3d6363d32722)\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83940,
        "title": "Alerting: Add \"Keep Last State\" backend functionality",
        "body": "**What is this feature?**\r\n\r\nThis PR adds the backend functionality that emulates the \"keep last state\" feature from legacy alerting in Grafana managed alerting (GMA). \r\n\r\nSetting either NoDataState or ExecutionErrorState to `KeepLast` will persist the previous state of the alert instance and set the state reason to a concatenation of the evaluation result and `KeepLast`, e.g. `NoData, KeepLast`. This will respect the pending period (`for`) of a rule, which in practice means that associated alert instances will move to the `Alerting` state if the `Pending` state is kept for long. \r\n\r\nSome examples:\r\n\r\n- t0:`[Normal] => [Normal]`, t1:`[NoData] => [Normal]`, t2:`[NoData] => [Normal]`\r\n- with `for=2` - t0:`[Alerting] => [Pending]`, t1:`[NoData] => [Pending]`, t2:`[NoData] => [Alerting]`\r\n\r\n**Why do we need this feature?**\r\n\r\nThis allows users to avoid being notified of no data and error evaluations on their alert rules. \r\n\r\n**Who is this feature for?**\r\n\r\nUsers of Grafana managed alerting. \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nResolves #82585\r\nRelated to #77800\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/alerting",
            "area/backend",
            "area/alerting/migration",
            "product-approved"
        ]
    },
    {
        "number": 84033,
        "title": "Chore: Bump docker image versions",
        "body": null,
        "labels": [
            "backport v9.5.x",
            "no-changelog",
            "backport-failed",
            "backport v10.4.x",
            "type/ci",
            "type/build-packaging",
            "backport v10.1.x",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport v10.0.x"
        ]
    },
    {
        "number": 83751,
        "title": "[v10.4.x] LDAP: Fix LDAP users authenticated via auth proxy not being able to use LDAP active sync",
        "body": "Backport 2182cc47acaeae16e7208b2a59ac80ef1e9bba76 from #83715\n\n---\n\n**What is this feature?**\r\n\r\nUsers authenticated with auth proxy via the LDAP client were being stored as auth_proxy (grafana db) users instead of ldap users.\r\n\r\nThe changes to the auth client should gradually fix this users to have an LDAP entry instead.\r\n\r\n(Possible research avenue into changing behavior of search to ignore the latest login method used)\r\n\r\nhttps://github.com/grafana/grafana/blob/9c9e5e68c8bbdc30dcfe7080e5104de3a5c217b6/pkg/services/user/userimpl/store.go#L632\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "add to changelog",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 82890,
        "title": "Alerting: Fix dashboard nav drawers disappearing",
        "body": "**What is this feature?**\r\nThis PR changes the way in which DashNav modals are rendered to fix disappearing modals when Toolbar buttons gets removed.\r\nIt happens on narrow screens when buttons in DashNav toolbar need to be collapsed and moved to the `Show more items` section.\r\nIf a button belonging to that section renders a modal the modal gets removed after any click due to removal of `Show more items` component\r\n\r\n**Why do we need this feature?**\r\nTo prevent disappearing modals created by Toolbar buttons\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\n**BEFORE**\r\n\r\nhttps://github.com/grafana/grafana/assets/6293563/66f3cb09-cd11-41e0-9db5-386353b98b8b\r\n\r\n**AFTER**\r\n\r\nhttps://github.com/grafana/grafana/assets/6293563/1469a119-bbd7-4dc4-bcc4-5018d06ab299\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport v10.4.x",
            "area/frontend"
        ]
    },
    {
        "number": 84580,
        "title": "[v10.4.x] Alerting docs: Fix broken links in TF Provisioning page",
        "body": "Fix errors:\r\n\r\n\r\n```\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/v10.4/alerting/configure-notifications/template-notifications\" from page \"docs/grafana/v10.4/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/v10.4/alerting/configure-notifications/create-notification-policy\" from page \"docs/grafana/v10.4/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/v10.4/alerting/configure-notifications/mute-timings\" from page \"docs/grafana/v10.4/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/v10.4/alerting/configure-notifications/manage-contact-points\" from page \"docs/grafana/v10.4/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\n```\r\n\r\n```\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/latest/alerting/configure-notifications/template-notifications\" from page \"docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/latest/alerting/configure-notifications/create-notification-policy\" from page \"docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/latest/alerting/configure-notifications/mute-timings\" from page \"docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n\r\nWARN  [en] REF_NOT_FOUND: Ref \"/docs/grafana/latest/alerting/configure-notifications/manage-contact-points\" from page \"docs/grafana/latest/alerting/set-up/provision-alerting-resources/terraform-provisioning/index.md\": page not found\r\n```",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs"
        ]
    },
    {
        "number": 83892,
        "title": "Postgres: Allow disabling SNI on SSL-enabled connections",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nStarting from version 1.10.7 lib/pq [enables SNI](https://github.com/lib/pq/commit/957fc0b40156534f8dd356bc81679d7e1365242b).\r\nHowever, this may be undesirable [for some cases](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNECT-SSLSNI)\r\nAlso, causes tls-mode `verify-ca` not to work correctly #65816\r\n\r\n**Why do we need this feature?**\r\n\r\nThis introduces a new database configuration for disabling `sslsni` by setting it to `0`.\r\nBy default is unset (fallbacks to the default `lib/pq` behaviour).\r\n \r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport-failed",
            "backport v10.4.x",
            "area/backend",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 84424,
        "title": "[v10.4.x] Alerting docs: document HTTP API to create templates",
        "body": "Backport e1d9aa5a7b37113f6ba649d777aeba9331b83ce3 from #84055\n\n---\n\nI thought there was no HTTP API endpoint to create notification templates because of the [existing docs](https://grafana.com/docs/grafana/latest/developers/http_api/alerting_provisioning/#templates) and [ngalert/api/api_provisioning.go#L40](https://github.com/grafana/grafana/blob/main/pkg/services/ngalert/api/api_provisioning.go#L40). \r\n\r\nBut I noticed the Terraform provider also creates templates via `PUT` request to `/api/v1/provisioning/templates/:name`. \r\n\r\nI tested it with `curl` command and it works:\r\n\r\n```bash\r\ncurl -X PUT 'http://localhost:3000/api/v1/provisioning/templates/my_new_template' \\\r\n     -H 'Content-Type: application/json' \\\r\n     -H 'Authorization: Bearer <api-token>' \\\r\n     -d \u2018{\"template\": \"three cats firing alerts\"}'\r\n```\r\n\r\nThis PR is a minor doc change to clarify this. I expect this being the last PR in the recent updates of the Alerting Provisioning docs. \r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 82936,
        "title": "remove oss from security config docs",
        "body": "**What is this feature?**\r\n\r\nAdds specification around feature availability for security\r\n\r\nFixes #82935\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 83129,
        "title": "[v10.4.x] Logs Panel: Add option extra UI functionality for log context",
        "body": "Backport f2c0309d714361816466fe6d1161a9cd1fe9f352 from #83123\n\n---\n\n**What is this feature?**\r\n\r\nThis PR fixes a bug where the `closeCallback` was not properly called.\r\n\r\nFurthermore, it adds support for the `getLogRowContextUi` functionality. This allows log context in dashboards to show an extra UI e.g. for Loki data sources.\r\n\r\n**Special notes for your reviewer:**\r\n\r\n1. Open a logs panel in a dashboard\r\n2. Open log context\r\n3. You should see the extra filters for Loki now\r\n\r\nFYI, this fixes a bug, thus I am also backporting this to v10.4.x.",
        "labels": [
            "add to changelog",
            "area/frontend",
            "datasource/Loki",
            "area/panel/logs",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83626,
        "title": "Anonymous: Add docs for anon users charged on enterprise",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\nAdd docs about anonymous users counting as Grafana Enterprise license users",
        "labels": [
            "type/docs",
            "no-changelog",
            "type/bug",
            "backport v10.4.x"
        ]
    },
    {
        "number": 84595,
        "title": "[v10.4.x] Alerting: Fix optional fields requiring validation rule",
        "body": "Backport 85bd116a1071b71d290487112e5532487f256781 from #84584\n\n---\n\nPrior to this PR an optional field with a custom validationRule would not allow the form to be completed without passing the (non-empty) validation rule.\r\n\r\nThis PR adds an additional check for empty optional fields when validation the regular expression in `validationRule`.\r\n\r\nFixes #84296",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/alerting",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83287,
        "title": "[v10.4.x] AuthProxy: Invalidate previous cached item for user when changes are made to any header",
        "body": "Backport 9282c7a7a409e19aa0295980fe97eba556143644 from #81445\n\n---\n\n**What is this feature?**\r\n\r\nfix: sign in using auth_proxy with role a -> b -> a would end up with role b\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nfixing a bug\r\n\r\n**Who is this feature for?**\r\n\r\nanyone who uses authproxy with role\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #81327\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "area/backend",
            "pr/external",
            "area/auth/authproxy",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 83205,
        "title": "[v10.4.x] Alerting: Fix dashboard nav drawers disappearing",
        "body": "Backport b02183e9ac415c2305875f68597ecea19e4e5a24 from #82890\n\n---\n\n**What is this feature?**\r\nThis PR changes the way in which DashNav modals are rendered to fix disappearing modals when Toolbar buttons gets removed.\r\nIt happens on narrow screens when buttons in DashNav toolbar need to be collapsed and moved to the `Show more items` section.\r\nIf a button belonging to that section renders a modal the modal gets removed after any click due to removal of `Show more items` component\r\n\r\n**Why do we need this feature?**\r\nTo prevent disappearing modals created by Toolbar buttons\r\n\r\n\r\n**Special notes for your reviewer:**\r\n\r\n**BEFORE**\r\n\r\nhttps://github.com/grafana/grafana/assets/6293563/66f3cb09-cd11-41e0-9db5-386353b98b8b\r\n\r\n**AFTER**\r\n\r\nhttps://github.com/grafana/grafana/assets/6293563/1469a119-bbd7-4dc4-bcc4-5018d06ab299\r\n\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 84055,
        "title": "Alerting docs: document HTTP API to create templates",
        "body": "I thought there was no HTTP API endpoint to create notification templates because of the [existing docs](https://grafana.com/docs/grafana/latest/developers/http_api/alerting_provisioning/#templates) and [ngalert/api/api_provisioning.go#L40](https://github.com/grafana/grafana/blob/main/pkg/services/ngalert/api/api_provisioning.go#L40). \r\n\r\nBut I noticed the Terraform provider also creates templates via `PUT` request to `/api/v1/provisioning/templates/:name`. \r\n\r\nI tested it with `curl` command and it works:\r\n\r\n```bash\r\ncurl -X PUT 'http://localhost:3000/api/v1/provisioning/templates/my_new_template' \\\r\n     -H 'Content-Type: application/json' \\\r\n     -H 'Authorization: Bearer <api-token>' \\\r\n     -d \u2018{\"template\": \"three cats firing alerts\"}'\r\n```\r\n\r\nThis PR is a minor doc change to clarify this. I expect this being the last PR in the recent updates of the Alerting Provisioning docs. \r\n",
        "labels": [
            "area/alerting",
            "no-changelog",
            "type/docs",
            "backport v10.4.x"
        ]
    },
    {
        "number": 83791,
        "title": "[v10.4.x] Fix: Cache busting of plugins module.js file",
        "body": "Backport c59ebfc60f5aec1eccfe07da7a6d948782ddafdb from #83763\n\n---\n\n\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nThe cachebuster allows us to append plugin version information to the end of the `module.js` url however it looks like the fix we implemented in #81658 broke the regex in our cachebuster.\r\n\r\n### before\r\n![image](https://github.com/grafana/grafana/assets/73201/8240b8a2-679b-4288-9734-4777fe2838ea)\r\n\r\n\r\n### after\r\n![image](https://github.com/grafana/grafana/assets/73201/5f9a3222-a5dc-46bf-ae41-31cbd1018e1e)\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nTo leverage browser caching.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\nI'd like to revisit this cachebuster at some point to only use pluginId and not attempt to extract it from paths/urls with regexs which feels quite brittle.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "type/bug",
            "backport",
            "area/plugins"
        ]
    },
    {
        "number": 84404,
        "title": "Chore: Bump update checker interval to 1 day",
        "body": "Increase the update checker interval. See [thread](https://raintank-corp.slack.com/archives/C05V3D0EPDZ/p1710351280643279) for details.",
        "labels": [
            "backport v9.5.x",
            "no-changelog",
            "backport v10.4.x",
            "area/backend",
            "type/ci",
            "backport v10.1.x",
            "backport v10.3.x",
            "backport v10.2.x",
            "backport v10.0.x"
        ]
    },
    {
        "number": 84345,
        "title": "[v10.4.x] Alerting: Improve alert list panel and alert rules toolbar permissions handling",
        "body": "Backport a4acd9d204f3b9560bab2b344dd0e64be41de747 from #83954\n\n---\n\n**What is this feature?**\r\nThis PR fixes `AlertList` panel and `AlertRulesToolbar` behaviour when the user lacks necessary alerting permissions\r\nThe PR introduces earlier permissions checking to avoid futile alerting API calls and 403 errors\r\n\r\n\r\nFixes #83872\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "area/alerting",
            "type/bug",
            "backport"
        ]
    },
    {
        "number": 84406,
        "title": "[v10.4.x] Alerting: Add \"Keep Last State\" backend functionality",
        "body": "Backport 10dc6c6d75d95f76e49c21329968161519cc0c88 from #83940\n\n---\n\n**What is this feature?**\r\n\r\nThis PR adds the backend functionality that emulates the \"keep last state\" feature from legacy alerting in Grafana managed alerting (GMA). \r\n\r\nSetting either NoDataState or ExecutionErrorState to `KeepLast` will persist the previous state of the alert instance and set the state reason to a concatenation of the evaluation result and `KeepLast`, e.g. `NoData, KeepLast`. This will respect the pending period (`for`) of a rule, which in practice means that associated alert instances will move to the `Alerting` state if the `Pending` state is kept for long. \r\n\r\nSome examples:\r\n\r\n- t0:`[Normal] => [Normal]`, t1:`[NoData] => [Normal]`, t2:`[NoData] => [Normal]`\r\n- with `for=2` - t0:`[Alerting] => [Pending]`, t1:`[NoData] => [Pending]`, t2:`[NoData] => [Alerting]`\r\n\r\n**Why do we need this feature?**\r\n\r\nThis allows users to avoid being notified of no data and error evaluations on their alert rules. \r\n\r\n**Who is this feature for?**\r\n\r\nUsers of Grafana managed alerting. \r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nResolves #82585\r\nRelated to #77800\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "area/frontend",
            "area/alerting",
            "area/backend",
            "area/alerting/migration",
            "product-approved",
            "backport"
        ]
    },
    {
        "number": 84022,
        "title": "[v10.4.x] disable_sanitize_html update",
        "body": "Backport 2142efc1a5fee5049a444b2b9a2e827f0137cd43 from #83643\n\n---\n\nAdded a note that states `disable_sanitize_html` configuration is not available for Grafana Cloud instances.\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #[7600\", or \"Fixes (paste link of issue)\"]\r\n\r\n-->\r\n\r\nFixes https://github.com/grafana/support-escalations/issues/7600\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83726,
        "title": "[v10.4.x] Chore: Improve domain validation for Google OAuth - Backport 83229 to v10.4.x",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nThis PR improves domain validation between the response token id `hd` claim and the `allowed_domains` configuration setting for Google OAuth.\r\n\r\nBackport from https://github.com/grafana/grafana/pull/83229\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\nAnyone using Google OAuth.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n\r\n# Release notice breaking change\r\n\r\nWe're adding a between the response of the ID token HD parameter and the list of allowed domains. This feature can be disabled through the configuration toggle `validate_hd `. Anyone using the legacy Google OAuth configuration should disable this validation if the ID Token response doesn't have the HD parameter.\r\n\r\n",
        "labels": [
            "area/backend",
            "add to changelog",
            "type/docs",
            "breaking change"
        ]
    },
    {
        "number": 81445,
        "title": "AuthProxy: Invalidate previous cached item for user when changes are made to any header",
        "body": "**What is this feature?**\r\n\r\nfix: sign in using auth_proxy with role a -> b -> a would end up with role b\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nfixing a bug\r\n\r\n**Who is this feature for?**\r\n\r\nanyone who uses authproxy with role\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\nFixes #81327\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/backend",
            "pr/external",
            "area/auth/authproxy",
            "type/bug"
        ]
    },
    {
        "number": 83715,
        "title": "LDAP: Fix LDAP users authenticated via auth proxy not being able to use LDAP active sync",
        "body": "**What is this feature?**\r\n\r\nUsers authenticated with auth proxy via the LDAP client were being stored as auth_proxy (grafana db) users instead of ldap users.\r\n\r\nThe changes to the auth client should gradually fix this users to have an LDAP entry instead.\r\n\r\n(Possible research avenue into changing behavior of search to ignore the latest login method used)\r\n\r\nhttps://github.com/grafana/grafana/blob/9c9e5e68c8bbdc30dcfe7080e5104de3a5c217b6/pkg/services/user/userimpl/store.go#L632\r\n\r\n**Why do we need this feature?**\r\n\r\n[Add a description of the problem the feature is trying to solve.]\r\n\r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "add to changelog",
            "backport v10.4.x",
            "area/backend",
            "backport v10.3.x",
            "type/bug"
        ]
    },
    {
        "number": 84249,
        "title": "[v10.4.x] Postgres: Allow disabling SNI on SSL-enabled connections",
        "body": "Backport 22d8258e48a870cdccbb53542ecf7d0d511b68c8 from #83892\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nStarting from version 1.10.7 lib/pq [enables SNI](https://github.com/lib/pq/commit/957fc0b40156534f8dd356bc81679d7e1365242b).\r\nHowever, this may be undesirable [for some cases](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNECT-SSLSNI)\r\nAlso, causes tls-mode `verify-ca` not to work correctly #65816\r\n\r\n**Why do we need this feature?**\r\n\r\nThis introduces a new database configuration for disabling `sslsni` by setting it to `0`.\r\nBy default is unset (fallbacks to the default `lib/pq` behaviour).\r\n \r\n**Who is this feature for?**\r\n\r\n[Add information on what kind of user the feature is for.]\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #65816\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "area/backend",
            "add to changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83879,
        "title": "GenAI: Update the component only when the response is fully generated",
        "body": "Fixes #79611, #76848\r\n\r\n**Problem**\r\nThe previous approach triggered a set state for every stream response. This was causing the component to enter into many re-renders, where React was stopping them and missing part of the message.\r\n\r\n**Solution**\r\nDo not set the state on every stream result, and accumulate the response to only commit the set state when it is fully completed. This changes the experience, but we want to try with this approach, to ensure the experience is performant enough.\r\n\r\n![2024-03-05 08 10 10](https://github.com/grafana/grafana/assets/5699976/6883f41b-ed7c-44ca-bc78-7a5db5907e32)\r\n\r\n\r\n",
        "labels": [
            "add to changelog",
            "type/bug",
            "backport v10.4.x",
            "area/frontend"
        ]
    },
    {
        "number": 83221,
        "title": "Plugins: Angular deprecation: Fix AngularDeprecationNotice not being rendered on first page load",
        "body": "<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nFixes an issue where the Angular warning at the top of the dashboards would not appear until entering/exiting editing mode if there are Angular panel plugins in the dashboard (but not Angular data sources).\r\n\r\nThis happens because the `plugins` property (which is used to test if Angular is detected on the panel) is populated asynchronously, so angular is not detected on the first render:\r\nhttps://github.com/grafana/grafana/blob/74c0463cd347e8b7a239dbb36ec6a2ef4926bc8e/public/app/features/dashboard/state/PanelModel.ts#L630-L634\r\n\r\nThis PR replaces that check by testing for the `angularDetected` and `hideAngularDeprecation` in `config` (`grafanaBootData`), which is always available unlike the `plugin` property for a panel.\r\n\r\nThe feature flag is enabled by default in v10.4.0, so this PR will be backported to Grafana v10.4.0 as well.\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nBugfix.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users with Angular panel plugins.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/dashboard",
            "type/bug",
            "area/plugins"
        ]
    },
    {
        "number": 83326,
        "title": "[v10.4.x] remove oss from security config docs",
        "body": "Backport 92fa868a77e91ab517d7ff81ef683a89319a1342 from #82936\n\n---\n\n**What is this feature?**\r\n\r\nAdds specification around feature availability for security\r\n\r\nFixes #82935\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "type/docs",
            "backport"
        ]
    },
    {
        "number": 83895,
        "title": "[v10.4.x] GenAI: Update the component only when the response is fully generated",
        "body": "Backport 112c0e7a79c00c7057ef362b6b8a9b7e4471f1b5 from #83879\n\n---\n\nFixes #79611, #76848\r\n\r\n**Problem**\r\nThe previous approach triggered a set state for every stream response. This was causing the component to enter into many re-renders, where React was stopping them and missing part of the message.\r\n\r\n**Solution**\r\nDo not set the state on every stream result, and accumulate the response to only commit the set state when it is fully completed. This changes the experience, but we want to try with this approach, to ensure the experience is performant enough.\r\n\r\n![2024-03-05 08 10 10](https://github.com/grafana/grafana/assets/5699976/6883f41b-ed7c-44ca-bc78-7a5db5907e32)\r\n\r\n\r\n",
        "labels": [
            "add to changelog",
            "type/bug",
            "backport",
            "area/frontend"
        ]
    },
    {
        "number": 83954,
        "title": "Alerting: Improve alert list panel and alert rules toolbar permissions handling",
        "body": "**What is this feature?**\r\nThis PR fixes `AlertList` panel and `AlertRulesToolbar` behaviour when the user lacks necessary alerting permissions\r\nThe PR introduces earlier permissions checking to avoid futile alerting API calls and 403 errors\r\n\r\n\r\nFixes #83872\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "area/alerting",
            "type/bug"
        ]
    },
    {
        "number": 83763,
        "title": "Fix: Cache busting of plugins module.js file",
        "body": "\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nThe cachebuster allows us to append plugin version information to the end of the `module.js` url however it looks like the fix we implemented in #81658 broke the regex in our cachebuster.\r\n\r\n### before\r\n![image](https://github.com/grafana/grafana/assets/73201/8240b8a2-679b-4288-9734-4777fe2838ea)\r\n\r\n\r\n### after\r\n![image](https://github.com/grafana/grafana/assets/73201/5f9a3222-a5dc-46bf-ae41-31cbd1018e1e)\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nTo leverage browser caching.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\nI'd like to revisit this cachebuster at some point to only use pluginId and not attempt to extract it from paths/urls with regexs which feels quite brittle.\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "area/frontend",
            "backport v10.3.x",
            "backport v10.2.x",
            "type/bug",
            "area/plugins"
        ]
    },
    {
        "number": 83526,
        "title": "[v10.4.x] Plugins: Angular deprecation: Fix AngularDeprecationNotice not being rendered on first page load",
        "body": "Backport e068804a9e4844283322105d5be0987bca9ba924 from #83221\n\n---\n\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n**What is this feature?**\r\n\r\nFixes an issue where the Angular warning at the top of the dashboards would not appear until entering/exiting editing mode if there are Angular panel plugins in the dashboard (but not Angular data sources).\r\n\r\nThis happens because the `plugins` property (which is used to test if Angular is detected on the panel) is populated asynchronously, so angular is not detected on the first render:\r\nhttps://github.com/grafana/grafana/blob/74c0463cd347e8b7a239dbb36ec6a2ef4926bc8e/public/app/features/dashboard/state/PanelModel.ts#L630-L634\r\n\r\nThis PR replaces that check by testing for the `angularDetected` and `hideAngularDeprecation` in `config` (`grafanaBootData`), which is always available unlike the `plugin` property for a panel.\r\n\r\nThe feature flag is enabled by default in v10.4.0, so this PR will be backported to Grafana v10.4.0 as well.\r\n\r\n\r\n**Why do we need this feature?**\r\n\r\nBugfix.\r\n\r\n**Who is this feature for?**\r\n\r\nGrafana users with Angular panel plugins.\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #<issue number>\", or \"Fixes (paste link of issue)\"\r\n\r\n-->\r\n\r\nFixes #\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [x] It works as expected from a user's perspective.\r\n- [x] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [x] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "area/frontend",
            "area/dashboard",
            "type/bug",
            "backport",
            "area/plugins"
        ]
    },
    {
        "number": 83643,
        "title": "disable_sanitize_html update",
        "body": "Added a note that states `disable_sanitize_html` configuration is not available for Grafana Cloud instances.\r\n\r\n<!--\r\n\r\nThank you for sending a pull request! Here are some tips:\r\n\r\n1. If this is your first time, please read our contribution guide at https://github.com/grafana/grafana/blob/main/CONTRIBUTING.md\r\n\r\n2. Ensure you include and run the appropriate tests as part of your Pull Request.\r\n\r\n3. In a new feature or configuration option, an update to the documentation is necessary. Everything related to the documentation is under the docs folder in the root of the repository.\r\n\r\n4. If the Pull Request is a work in progress, make use of GitHub's \"Draft PR\" feature and mark it as such.\r\n\r\n5. If you can not merge your Pull Request due to a merge conflict, Rebase it. This gets it in sync with the main branch.\r\n\r\n6. Name your PR as \"<FeatureArea>: Describe your change\", e.g. Alerting: Prevent race condition. If it's a fix or feature relevant for the changelog describe the user impact in the title. The PR title is used to auto-generate the changelog for issues marked with the \"add to changelog\" label.\r\n\r\n7. If your PR content should be added to the What's New document for the next major or minor release, add the **add to what's new** label to your PR. Note that you should add this label to the main PR that introduces the feature; do not add this label to smaller PRs for the feature.\r\n\r\n-->\r\n\r\n\r\n**Which issue(s) does this PR fix?**:\r\n\r\n<!--\r\n\r\n- Automatically closes linked issue when the Pull Request is merged.\r\n\r\nUsage: \"Fixes #[7600\", or \"Fixes (paste link of issue)\"]\r\n\r\n-->\r\n\r\nFixes https://github.com/grafana/support-escalations/issues/7600\r\n\r\n**Special notes for your reviewer:**\r\n\r\nPlease check that:\r\n- [ ] It works as expected from a user's perspective.\r\n- [ ] If this is a pre-GA feature, it is behind a feature toggle.\r\n- [ ] The docs are updated, and if this is a [notable improvement](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/#how-to-determine-if-content-belongs-in-a-whats-new-document), it's added to our [What's New](https://grafana.com/docs/writers-toolkit/writing-guide/contribute-release-notes/) doc.\r\n",
        "labels": [
            "no-changelog",
            "backport v10.4.x",
            "type/docs",
            "backport v10.3.x",
            "backport v10.2.x"
        ]
    },
    {
        "number": 84065,
        "title": "[v10.4.x] Chore: Bump docker image versions",
        "body": "Backport 0236053f708e70dd8a7b0040516e2b3b862b7f77 from #84033\r\n\r\nIncluded fix from #83228",
        "labels": [
            "type/ci",
            "no-changelog",
            "backport",
            "type/build-packaging"
        ]
    }
]